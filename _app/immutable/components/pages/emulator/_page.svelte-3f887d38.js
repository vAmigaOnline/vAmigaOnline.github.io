var Ge=Object.defineProperty;var Oe=(n,t,r)=>t in n?Ge(n,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[t]=r;var V=(n,t,r)=>(Oe(n,typeof t!="symbol"?t+"":t,r),r);import{S as Y,i as K,s as q,k as A,l as D,m as P,h as T,p as ae,n as S,b as U,B as z,C as y,o as le,L as re,X as ce,E as Te,a as N,c as G,K as me,_ as ee,G as k,H as Ee,I as we,J as Se,f as v,t as R,Z as W,e as he,g as ve,d as Re,w as C,x as F,y as L,T as xe,U as oe,z as B,q as $e,r as ze}from"../../../chunks/index-f90046fb.js";import{f as ne}from"../../../chunks/IconBase.svelte_svelte_type_style_lang-24ef3e6e.js";import{p as Ae,aw as Ve,ax as De,au as He,a2 as We,a3 as Ye,a4 as Ke,a5 as qe,a6 as je,al as Je,az as Ze}from"../../../chunks/navigation-f1d3683a.js";class te{constructor(t=0){V(this,"current",0);V(this,"target",0);V(this,"deltaStep",.005);this.current=t,this.target=t}animates(){return this.current!=this.target}clamped(){return this.current<0?0:this.current>1?1:this.current}set(t,r=25){this.target=t,this.deltaStep=Math.abs(this.target-this.current)/r}move(){this.current+this.deltaStep<=this.target?this.current+=this.deltaStep:this.current-this.deltaStep>=this.target?this.current-=this.deltaStep:this.current=this.target}}const J=313,Z=912;class Qe{constructor(){V(this,"x1",new te(.1));V(this,"y1",new te(.1));V(this,"x2",new te(.9));V(this,"y2",new te(.9))}animates(){return this.x1.animates()||this.y1.animates()||this.x2.animates()||this.y2.animates()}zoomIn(){console.log("zoomIn"),this.x1.set(.188),this.y1.set(.106),this.x2.set(.188+.733),this.y2.set(.106+.867),console.log("New rect: "+this.x1.target+", "+this.y1.target+", "+this.x2.target+", "+this.y2.target)}zoomOut(){console.log("zoomOut"),this.x1.set(0),this.y1.set(0),this.x2.set(1),this.y2.set(1)}move(){this.x1.move(),this.y1.move(),this.x2.move(),this.y2.move()}}function et(n){let t;return{c(){t=A("canvas"),this.h()},l(r){t=D(r,"CANVAS",{style:!0,class:!0,tabindex:!0}),P(t).forEach(T),this.h()},h(){ae(t,"image-rendering","pixelated"),S(t,"class","w-full h-full"),S(t,"tabindex","-1")},m(r,o){U(r,t,o),n[4](t)},p:z,i:z,o:z,d(r){r&&T(t),n[4](null)}}}function tt(n,t,r){let o,a,i;y(n,Ae,m=>r(22,o=m)),y(n,Ve,m=>r(23,a=m)),y(n,De,m=>r(24,i=m));let s,e,c=!0,g=!0,l=0,f=0,h,u,M,E,d,p,w,x,O,I,H;const Q=`
    	attribute vec4 aVertexPosition;
    	varying highp vec2 vTextureCoord;
    	void main() {
    		gl_Position = aVertexPosition;
			vTextureCoord = gl_Position.xy * .5 + .5;
    	}
   	`,Ue=`
    	attribute vec4 aVertexPosition;
    	attribute vec2 aTextureCoord;
    	varying highp vec2 vTextureCoord;
    	void main() {
    		gl_Position = aVertexPosition;
    		vTextureCoord = aTextureCoord;
    	}
   	`,Ie=`		
		precision mediump float;

		varying highp vec2 vTextureCoord;
	   	uniform sampler2D u_lfSampler;
	   	uniform sampler2D u_sfSampler;
		uniform float u_lweight;
		uniform float u_sweight;

		void main()
		{
		    vec2 coord = vTextureCoord * vec2(912.0, 626.0);
			vec2 coord2 = vec2(floor(coord.x), floor(coord.y));
			float w; 

			vec4 color;
		    if (mod(coord2.y, 2.0) == 0.0) {
		        // color = vec4(1.0, 0.0, 0.0, 1.0); 
				color = texture2D(u_lfSampler, vTextureCoord);
				w = u_lweight;
		    } else {
		        // color = vec4(1.0, 1.0, 0.0, 1.0); 
				color = texture2D(u_sfSampler, vTextureCoord);
				w = u_sweight;
		    }

		    gl_FragColor = color * vec4(w, w, w, 1.0);
		}
   `,ke=`		
		precision mediump float;
    
		varying highp vec2 vTextureCoord;
    	uniform sampler2D sampler;
    	void main() {
			gl_FragColor = texture2D(sampler, vTextureCoord);
			/*
			vec2 coord = vec2(floor(gl_FragCoord.x), floor(gl_FragCoord.y));
		    if (mod(coord.y, 2.0) == 0.0) {
		        gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0);
		    } else {
		        gl_FragColor = vec4(1.0, 1.0, 0.0, 1.0);
		    }
			*/
    	}
   `;function ye(){console.log("initWebGL()");const m={alpha:!1,antialias:!1,depth:!1,preserveDrawingBuffer:!1,stencil:!1};if(!(s.getContext("webgl2",m)instanceof WebGL2RenderingContext))throw new Error("vAmiga Online needs WebGL2 to run.");e=s.getContext("webgl2",m),e.disable(e.BLEND),e.disable(e.DEPTH_TEST),e.disable(e.SCISSOR_TEST),e.disable(e.STENCIL_TEST),e.clearColor(0,0,0,1),e.clear(e.COLOR_BUFFER_BIT),d=ue(Q,Ie),p=e.getUniformLocation(d,"u_lweight"),w=e.getUniformLocation(d,"u_sweight"),O=e.getUniformLocation(d,"u_lfSampler"),x=e.getUniformLocation(d,"u_sfSampler"),I=ue(Ue,ke),H=e.getUniformLocation(I,"sampler"),e.uniform1i(H,0);const _=new Float32Array([-1,1,1,1,-1,-1,1,-1]);ge(_),ie(I,"aVertexPosition"),ie(d,"aVertexPosition0");const b=new Float32Array([0,1,1,1,0,0,1,0]);h=ge(b),ie(I,"aTextureCoord"),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!0),u=se(Z,J),M=se(Z,J),E=se(Z,2*J)}function Pe(m,_,b,X){console.log("updateTextureRect("+m+", "+_+" ,"+b+", "+X+")");const $=new Float32Array([m,1-_,b,1-_,m,1-X,b,1-X]);e.bindBuffer(e.ARRAY_BUFFER,h),e.bufferSubData(e.ARRAY_BUFFER,0,$)}function Ce(){const m=s.clientWidth,_=s.clientHeight;(s.width!==m||s.height!==_)&&(r(0,s.width=m,s),r(0,s.height=_,s),console.log("Resizing canvas to "+m+" x "+_))}function ue(m,_){const b=fe(e.VERTEX_SHADER,m),X=fe(e.FRAGMENT_SHADER,_),$=e.createProgram();if(e.attachShader($,b),e.attachShader($,X),e.linkProgram($),!e.getProgramParameter($,e.LINK_STATUS))throw new Error(`Shader link error: ${e.getProgramInfoLog($)}`);return e.useProgram($),$}function fe(m,_){const b=e.createShader(m);if(e.shaderSource(b,_),e.compileShader(b),!e.getShaderParameter(b,e.COMPILE_STATUS))throw new Error(`Shader compile error: ${e.getShaderInfoLog(b)}`);return b}function se(m,_){const b=e.createTexture();return e.bindTexture(e.TEXTURE_2D,b),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,m,_,0,e.RGBA,e.UNSIGNED_BYTE,null),b}function ge(m){const _=e.createBuffer();return e.bindBuffer(e.ARRAY_BUFFER,_),e.bufferData(e.ARRAY_BUFFER,m,e.STATIC_DRAW),_}function ie(m,_){const b=e.getAttribLocation(m,_);e.enableVertexAttribArray(b),e.vertexAttribPointer(b,2,e.FLOAT,!1,0,0)}function Fe(m){Ce(),Be()}function Le(){Me(),Xe()}function Be(){const m=Z,_=J;if(i.poweredOff()){const b=a.noise();g=c,c=!g;const X=new Uint8Array(o.HEAPU8.buffer,b,m*_*4);c?(e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,u),e.texSubImage2D(e.TEXTURE_2D,0,0,0,m,_,e.RGBA,e.UNSIGNED_BYTE,X)):(e.activeTexture(e.TEXTURE1),e.bindTexture(e.TEXTURE_2D,M),e.texSubImage2D(e.TEXTURE_2D,0,0,0,m,_,e.RGBA,e.UNSIGNED_BYTE,X))}else{const b=a.getEmulatorTexture();if(g=b.prevLof,c=b.currLof,b.frameNr!=l+1&&b.frameNr==l)return;l=b.frameNr;const X=new Uint8Array(o.HEAPU8.buffer,b.data,m*_*4);c?(e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,u),e.texSubImage2D(e.TEXTURE_2D,0,0,0,m,_,e.RGBA,e.UNSIGNED_BYTE,X)):(e.activeTexture(e.TEXTURE1),e.bindTexture(e.TEXTURE_2D,M),e.texSubImage2D(e.TEXTURE_2D,0,0,0,m,_,e.RGBA,e.UNSIGNED_BYTE,X))}}function Me(){if(c==g)c?(e.useProgram(d),e.uniform1f(p,1),e.uniform1f(w,1),e.uniform1i(O,0),e.uniform1i(x,0)):(e.useProgram(d),e.uniform1f(p,1),e.uniform1f(w,1),e.uniform1i(O,1),e.uniform1i(x,1));else{e.useProgram(d),e.uniform1i(O,1),e.uniform1i(x,0);const _=.5;e.useProgram(d),e.uniform1f(p,f%4>=2?1:_),e.uniform1f(w,f%4>=2?_:1),f+=1}const m=e.createFramebuffer();e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,u),e.activeTexture(e.TEXTURE1),e.bindTexture(e.TEXTURE_2D,M),e.bindFramebuffer(e.FRAMEBUFFER,m),e.viewport(0,0,Z,2*J),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,E,0),e.drawArrays(e.TRIANGLE_STRIP,0,4)}function Xe(){e.bindFramebuffer(e.FRAMEBUFFER,null),e.viewport(0,0,e.canvas.width,e.canvas.height),e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,E),e.useProgram(I),e.drawArrays(e.TRIANGLE_STRIP,0,4)}le(()=>{ye()});function Ne(m){re[m?"unshift":"push"](()=>{s=m,r(0,s)})}return[s,Pe,Fe,Le,Ne]}class rt extends Y{constructor(t){super(),K(this,t,tt,et,q,{updateTextureRect:1,update:2,render:3},null,[-1,-1])}get updateTextureRect(){return this.$$.ctx[1]}get update(){return this.$$.ctx[2]}get render(){return this.$$.ctx[3]}}function ot(n){let t,r,o;return{c(){t=A("textarea"),this.h()},l(a){t=D(a,"TEXTAREA",{style:!0,class:!0}),P(t).forEach(T),this.h()},h(){t.readOnly=!0,ae(t,"resize","none"),ae(t,"font-variant-ligatures","none"),S(t,"class","font-azeret text-base outline-0 text-white bg-gray-500/75 w-full h-full p-2")},m(a,i){U(a,t,i),n[9](t),r||(o=ce(t,"keydown",n[1]),r=!0)},p:z,i:z,o:z,d(a){a&&T(t),n[9](null),r=!1,o()}}}function nt(n,t,r){let o,a,i,s,e,c;y(n,He,u=>r(3,o=u)),y(n,We,u=>r(4,a=u)),y(n,Ye,u=>r(5,i=u)),y(n,Ke,u=>r(6,s=u)),y(n,qe,u=>r(7,e=u)),y(n,je,u=>r(8,c=u));let g=!1,l;le(()=>{console.log("RetroShell: onMount"),r(2,g=!0)});function f(u){if(u.preventDefault(),u.ctrlKey){switch(u.key){case"k":o.pressCut();break;case"a":o.pressHome();break}return}switch(u.key){case"ArrowUp":o.pressUp();break;case"ArrowDown":o.pressDown();break;case"ArrowLeft":o.pressLeft();break;case"ArrowRight":o.pressRight();break;case"Home":o.pressHome();break;case"End":o.pressEnd();break;case"Backspace":o.pressBackspace();break;case"Delete":o.pressDelete();break;case"Enter":u.shiftKey?o.pressShiftReturn():o.pressReturn();break;case"Tab":o.pressTab();break;default:u.key.length==1&&o.pressKey(u.key.charCodeAt(0))}}function h(u){re[u?"unshift":"push"](()=>{l=u,r(0,l),r(8,c),r(2,g),r(3,o)})}return n.$$.update=()=>{if(n.$$.dirty&269&&c&&g){console.log("MsgUpdateConsole");let u=o.getCursorRel();r(0,l.value=o.getText(),l),l.focus(),l.setSelectionRange(l.value.length+u-1,l.value.length+u),r(0,l.scrollTop=l.scrollHeight,l)}n.$$.dirty&132&&e&&g&&console.log("MsgScriptDone"),n.$$.dirty&68&&s&&g&&console.log("MsgScriptPause"),n.$$.dirty&36&&i&&g&&console.log("MsgScriptAbort"),n.$$.dirty&20&&a&&g&&console.log("MsgScriptWakeup")},[l,f,g,o,a,i,s,e,c,h]}class st extends Y{constructor(t){super(),K(this,t,nt,ot,q,{})}}function it(n){let t,r,o,a,i,s,e,c;const g=n[8].default,l=Te(g,n,n[7],null);return{c(){t=A("button"),r=A("img"),a=N(),l&&l.c(),this.h()},l(f){t=D(f,"BUTTON",{type:!0,class:!0,id:!0,title:!0});var h=P(t);r=D(h,"IMG",{class:!0,src:!0,alt:!0}),a=G(h),l&&l.l(h),h.forEach(T),this.h()},h(){S(r,"class",""),me(r.src,o=n[5])||S(r,"src",o),S(r,"alt","Power Icon"),S(t,"type","button"),S(t,"class",i="flex-none mx-px w-8 rounded "+n[1]+" p-1 text-white hover:bg-gray-100 hover:scale-100"),S(t,"id",n[6]),S(t,"title",n[4]),t.disabled=n[0],ee(t,"hasIcon",n[2]),ee(t,"active",n[3])},m(f,h){U(f,t,h),k(t,r),k(t,a),l&&l.m(t,null),s=!0,e||(c=ce(t,"click",n[9]),e=!0)},p(f,[h]){(!s||h&32&&!me(r.src,o=f[5]))&&S(r,"src",o),l&&l.p&&(!s||h&128)&&Ee(l,g,f,f[7],s?Se(g,f[7],h,null):we(f[7]),null),(!s||h&2&&i!==(i="flex-none mx-px w-8 rounded "+f[1]+" p-1 text-white hover:bg-gray-100 hover:scale-100"))&&S(t,"class",i),(!s||h&64)&&S(t,"id",f[6]),(!s||h&16)&&S(t,"title",f[4]),(!s||h&1)&&(t.disabled=f[0]),(!s||h&6)&&ee(t,"hasIcon",f[2]),(!s||h&10)&&ee(t,"active",f[3])},i(f){s||(v(l,f),s=!0)},o(f){R(l,f),s=!1},d(f){f&&T(t),l&&l.d(f),e=!1,c()}}}function at(n,t,r){let{$$slots:o={},$$scope:a}=t,{disabled:i=!1}=t,{bgcolor:s="bg-gray-300"}=t,{hasIcon:e=!1}=t,{active:c=!1}=t,{title:g=""}=t,{icon:l=""}=t,{id:f=""}=t;function h(u){W.call(this,n,u)}return n.$$set=u=>{"disabled"in u&&r(0,i=u.disabled),"bgcolor"in u&&r(1,s=u.bgcolor),"hasIcon"in u&&r(2,e=u.hasIcon),"active"in u&&r(3,c=u.active),"title"in u&&r(4,g=u.title),"icon"in u&&r(5,l=u.icon),"id"in u&&r(6,f=u.id),"$$scope"in u&&r(7,a=u.$$scope)},[i,s,e,c,g,l,f,a,o,h]}class j extends Y{constructor(t){super(),K(this,t,at,it,q,{disabled:0,bgcolor:1,hasIcon:2,active:3,title:4,icon:5,id:6})}}function lt(n){let t;return{c(){t=A("div"),this.h()},l(r){t=D(r,"DIV",{class:!0}),P(t).forEach(T),this.h()},h(){S(t,"class","w-64")},m(r,o){U(r,t,o)},p:z,i:z,o:z,d(r){r&&T(t)}}}class ct extends Y{constructor(t){super(),K(this,t,null,lt,q,{})}}function ut(n){let t,r,o;const a=n[2].default,i=Te(a,n,n[1],null);return{c(){t=A("div"),i&&i.c(),this.h()},l(s){t=D(s,"DIV",{class:!0});var e=P(t);i&&i.l(e),e.forEach(T),this.h()},h(){S(t,"class",r="round "+n[0]+" flex p-2 space-x-1")},m(s,e){U(s,t,e),i&&i.m(t,null),o=!0},p(s,[e]){i&&i.p&&(!o||e&2)&&Ee(i,a,s,s[1],o?Se(a,s[1],e,null):we(s[1]),null),(!o||e&1&&r!==(r="round "+s[0]+" flex p-2 space-x-1"))&&S(t,"class",r)},i(s){o||(v(i,s),o=!0)},o(s){R(i,s),o=!1},d(s){s&&T(t),i&&i.d(s)}}}function ft(n,t,r){let{$$slots:o={},$$scope:a}=t,{bgcolor:i="bg-red-600"}=t;return n.$$set=s=>{"bgcolor"in s&&r(0,i=s.bgcolor),"$$scope"in s&&r(1,a=s.$$scope)},[i,a,o]}class de extends Y{constructor(t){super(),K(this,t,ft,ut,q,{bgcolor:0})}}function _e(n){let t,r,o,a,i,s,e,c;return r=new de({props:{bgcolor:be,$$slots:{default:[gt]},$$scope:{ctx:n}}}),a=new ct({}),s=new de({props:{bgcolor:be,$$slots:{default:[mt]},$$scope:{ctx:n}}}),{c(){t=A("div"),C(r.$$.fragment),o=N(),C(a.$$.fragment),i=N(),C(s.$$.fragment),this.h()},l(g){t=D(g,"DIV",{class:!0});var l=P(t);F(r.$$.fragment,l),o=G(l),F(a.$$.fragment,l),i=G(l),F(s.$$.fragment,l),l.forEach(T),this.h()},h(){S(t,"class","bg-gray-500/80 flex w-screen justify-between p-0")},m(g,l){U(g,t,l),L(r,t,null),k(t,o),L(a,t,null),k(t,i),L(s,t,null),c=!0},p(g,l){const f={};l&4097&&(f.$$scope={dirty:l,ctx:g}),r.$set(f);const h={};l&4101&&(h.$$scope={dirty:l,ctx:g}),s.$set(h)},i(g){c||(v(r.$$.fragment,g),v(a.$$.fragment,g),v(s.$$.fragment,g),xe(()=>{e||(e=oe(t,ne,{duration:500},!0)),e.run(1)}),c=!0)},o(g){R(r.$$.fragment,g),R(a.$$.fragment,g),R(s.$$.fragment,g),e||(e=oe(t,ne,{duration:500},!1)),e.run(0),c=!1},d(g){g&&T(t),B(r),B(a),B(s),g&&e&&e.end()}}}function gt(n){let t,r,o,a,i,s;return t=new j({props:{id:"home",icon:"icons/homeIcon.png",bgcolor:n[0]}}),t.$on("click",n[6]),o=new j({props:{id:"retroShell",icon:"icons/retroShellIcon.png",bgcolor:n[0]}}),o.$on("click",n[7]),i=new j({props:{id:"monitor",icon:"icons/monitorIcon.png",bgcolor:n[0]}}),i.$on("click",n[8]),{c(){C(t.$$.fragment),r=N(),C(o.$$.fragment),a=N(),C(i.$$.fragment)},l(e){F(t.$$.fragment,e),r=G(e),F(o.$$.fragment,e),a=G(e),F(i.$$.fragment,e)},m(e,c){L(t,e,c),U(e,r,c),L(o,e,c),U(e,a,c),L(i,e,c),s=!0},p(e,c){const g={};c&1&&(g.bgcolor=e[0]),t.$set(g);const l={};c&1&&(l.bgcolor=e[0]),o.$set(l);const f={};c&1&&(f.bgcolor=e[0]),i.$set(f)},i(e){s||(v(t.$$.fragment,e),v(o.$$.fragment,e),v(i.$$.fragment,e),s=!0)},o(e){R(t.$$.fragment,e),R(o.$$.fragment,e),R(i.$$.fragment,e),s=!1},d(e){B(t,e),e&&T(r),B(o,e),e&&T(a),B(i,e)}}}function mt(n){let t,r,o,a,i,s;return t=new j({props:{id:"pause",icon:n[2],bgcolor:n[0]}}),t.$on("click",n[9]),o=new j({props:{id:"reset",icon:"icons/resetIcon.png",bgcolor:n[0]}}),o.$on("click",n[10]),i=new j({props:{id:"power",icon:"icons/powerIcon.png",bgcolor:n[0]}}),i.$on("click",n[11]),{c(){C(t.$$.fragment),r=N(),C(o.$$.fragment),a=N(),C(i.$$.fragment)},l(e){F(t.$$.fragment,e),r=G(e),F(o.$$.fragment,e),a=G(e),F(i.$$.fragment,e)},m(e,c){L(t,e,c),U(e,r,c),L(o,e,c),U(e,a,c),L(i,e,c),s=!0},p(e,c){const g={};c&4&&(g.icon=e[2]),c&1&&(g.bgcolor=e[0]),t.$set(g);const l={};c&1&&(l.bgcolor=e[0]),o.$set(l);const f={};c&1&&(f.bgcolor=e[0]),i.$set(f)},i(e){s||(v(t.$$.fragment,e),v(o.$$.fragment,e),v(i.$$.fragment,e),s=!0)},o(e){R(t.$$.fragment,e),R(o.$$.fragment,e),R(i.$$.fragment,e),s=!1},d(e){B(t,e),e&&T(r),B(o,e),e&&T(a),B(i,e)}}}function ht(n){let t,r,o=n[1]&&_e(n);return{c(){o&&o.c(),t=he()},l(a){o&&o.l(a),t=he()},m(a,i){o&&o.m(a,i),U(a,t,i),r=!0},p(a,[i]){a[1]?o?(o.p(a,i),i&2&&v(o,1)):(o=_e(a),o.c(),v(o,1),o.m(t.parentNode,t)):o&&(ve(),R(o,1,1,()=>{o=null}),Re())},i(a){r||(v(o),r=!0)},o(a){R(o),r=!1},d(a){o&&o.d(a),a&&T(t)}}}let be="transparent";function dt(n,t,r){let o,a;y(n,Je,E=>r(5,a=E));let{bgcolor:i="bg-gray-300"}=t,s=!0;function e(){console.log("show"),r(1,s=!0)}function c(){console.log("hide"),r(1,s=!1)}function g(E){W.call(this,n,E)}function l(E){W.call(this,n,E)}function f(E){W.call(this,n,E)}function h(E){W.call(this,n,E)}function u(E){W.call(this,n,E)}function M(E){W.call(this,n,E)}return n.$$set=E=>{"bgcolor"in E&&r(0,i=E.bgcolor)},n.$$.update=()=>{n.$$.dirty&32&&r(2,o=a?"icons/pauseIcon.png":"icons/runIcon.png")},[i,s,o,e,c,a,g,l,f,h,u,M]}class _t extends Y{constructor(t){super(),K(this,t,dt,ht,q,{bgcolor:0,showToolbar:3,hideToolbar:4})}get showToolbar(){return this.$$.ctx[3]}get hideToolbar(){return this.$$.ctx[4]}}function pe(n){let t,r,o,a;return r=new st({}),{c(){t=A("div"),C(r.$$.fragment),this.h()},l(i){t=D(i,"DIV",{class:!0});var s=P(t);F(r.$$.fragment,s),s.forEach(T),this.h()},h(){S(t,"class","absolute top-0 left-0 w-full h-full border-none border-red-500 flex-grow overflow-scroll")},m(i,s){U(i,t,s),L(r,t,null),a=!0},i(i){a||(v(r.$$.fragment,i),xe(()=>{o||(o=oe(t,ne,{},!0)),o.run(1)}),a=!0)},o(i){R(r.$$.fragment,i),o||(o=oe(t,ne,{},!1)),o.run(0),a=!1},d(i){i&&T(t),B(r),i&&o&&o.end()}}}function bt(n){let t,r,o,a,i,s,e,c,g,l,f,h,u,M,E={};e=new rt({props:E}),n[5](e);let d=n[2]&&pe(),p={};return f=new _t({props:p}),n[6](f),f.$on("click",n[3]),{c(){t=A("body"),r=A("title"),o=$e("vAmiga Online"),a=N(),i=A("div"),s=A("div"),C(e.$$.fragment),c=N(),d&&d.c(),g=N(),l=A("div"),C(f.$$.fragment),this.h()},l(w){t=D(w,"BODY",{class:!0});var x=P(t);r=D(x,"TITLE",{});var O=P(r);o=ze(O,"vAmiga Online"),O.forEach(T),a=G(x),i=D(x,"DIV",{class:!0});var I=P(i);s=D(I,"DIV",{class:!0});var H=P(s);F(e.$$.fragment,H),c=G(H),d&&d.l(H),H.forEach(T),g=G(I),l=D(I,"DIV",{class:!0});var Q=P(l);F(f.$$.fragment,Q),Q.forEach(T),I.forEach(T),x.forEach(T),this.h()},h(){S(s,"class","relative w-full h-full"),S(l,"class","absolute top-0 left-0"),S(i,"class","h-screen flex flex-col"),S(t,"class","h-screen bg-black text-white")},m(w,x){U(w,t,x),k(t,r),k(r,o),k(t,a),k(t,i),k(i,s),L(e,s,null),k(s,c),d&&d.m(s,null),k(i,g),k(i,l),L(f,l,null),h=!0,u||(M=ce(t,"mousemove",n[4]),u=!0)},p(w,[x]){const O={};e.$set(O),w[2]?d?x&4&&v(d,1):(d=pe(),d.c(),v(d,1),d.m(s,null)):d&&(ve(),R(d,1,1,()=>{d=null}),Re());const I={};f.$set(I)},i(w){h||(v(e.$$.fragment,w),v(d),v(f.$$.fragment,w),h=!0)},o(w){R(e.$$.fragment,w),R(d),R(f.$$.fragment,w),h=!1},d(w){w&&T(t),n[5](null),B(e),d&&d.d(),n[6](null),B(f),u=!1,M()}}}function pt(n,t,r){let o,a;y(n,De,p=>r(8,o=p)),y(n,Ae,p=>r(9,a=p));let i,s,e=!1,c=new Qe;le(()=>{console.log("onMount()"),r(0,i.enableDrawing=!0,i),c.zoomIn(),window.requestAnimationFrame(g)});function g(p){o!=null?(l(p),f()):console.log("Skipping draw: Store not yet initialized"),window.requestAnimationFrame(g)}function l(p){c.animates()&&(c.move(),i.updateTextureRect(c.x1.current,c.y1.current,c.x2.current,c.y2.current)),i.update(p)}function f(){i.render()}function h(p){let w=p.currentTarget;switch(console.log("id = "+w.id),w.id){case"home":Ze("/");break;case"retroShell":r(2,e=!e);break;case"monitor":o.getConfig(a.OPT_DMA_DEBUG_ENABLE)?(c.zoomIn(),o.configure(a.OPT_DMA_DEBUG_ENABLE,0)):(c.zoomOut(),o.configure(a.OPT_DMA_DEBUG_ENABLE,1));break;case"pause":o.stopAndGo();break;case"power":o.poweredOn()?o.powerOff():o.run();break;case"reset":o.hardReset();break;default:console.log("Invalid id: "+w.id)}}let u={x:0,y:0};function M(p){u.y>=50&&p.clientY<50&&(console.log("-> SHOW"),s.showToolbar()),u.y<50&&p.clientY>=50&&(console.log("-> HIDE"),s.hideToolbar()),u.x=p.clientX,u.y=p.clientY}function E(p){re[p?"unshift":"push"](()=>{i=p,r(0,i)})}function d(p){re[p?"unshift":"push"](()=>{s=p,r(1,s)})}return[i,s,e,h,M,E,d]}class vt extends Y{constructor(t){super(),K(this,t,pt,bt,q,{})}}export{vt as default};
