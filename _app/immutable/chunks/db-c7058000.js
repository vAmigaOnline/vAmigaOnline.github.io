var yr=Object.defineProperty;var gr=(e,t,n)=>t in e?yr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var _n=(e,t,n)=>(gr(e,typeof t!="symbol"?t+"":t,n),n);import{B as l}from"./index-7d5f5cba.js";var mr=(e=>(e[e.none=0]="none",e[e.mouse=1]="mouse",e[e.keyset1=2]="keyset1",e[e.keyset2=3]="keyset2",e))(mr||{}),Tn=(e=>(e[e.none=0]="none",e[e.dropzone=1]="dropzone",e[e.kickstart=2]="kickstart",e[e.settings=3]="settings",e[e.shell=4]="shell",e[e.showcases=5]="showcases",e))(Tn||{}),In=(e=>(e[e.smooth=0]="smooth",e[e.pixelated=1]="pixelated",e))(In||{}),Bn=(e=>(e[e.default=0]="default",e[e.light=1]="light",e[e.dark=2]="dark",e[e.coffee=3]="coffee",e[e.cupcake=4]="cupcake",e[e.forest=5]="forest",e[e.aqua=6]="aqua",e[e.garden=7]="garden",e[e.pastel=8]="pastel",e))(Bn||{}),Fn=(e=>(e[e.auto=0]="auto",e[e.never=1]="never",e[e.always=2]="always",e))(Fn||{});const qi=l(),Ji=l(),$i=l(),Zi=l(),ea=l(),ta=l(),na=l(),ra=l(),ia=l(),aa=l(),oa=l(),ua=l(),sa=l(),ca=l(),la=l(),fa=l(Bn.default),ha=l(!0),da=l(In.smooth),pa=l(50),va=l(Fn.auto),ya=l(0),ga=l(1),ma=l(1),ba=l(0),_a=l(),wa=l(),xa=l(0),Ea=l(0),Sa=l(0),ka=l(0),Ma=l("fit"),Aa=l(!1),Ca=l(Tn.none),Da=l(0),Ka=l(null),Ra=l(!1),Pa=l(!1),Oa=l(!1),Ta=l(!1),Ia=l(!1),Ba=l(!1),Fa=l(!1),ja=l(!1),Na=l([!1,!1,!1,!1]),La=l([!1,!1,!1,!1]),Ua=l([!1,!1,!1,!1]),Va=l([!1,!1,!1,!1]),Ha=l([!1,!1,!1,!1]),Wa=l([!1,!1,!1,!1]),za=l([0,0,0,0]),Ya=l(0),Qa=l(0),Xa=l(""),Ga=l(0),qa=l(0),Ja=l(0),$a=l(0),Za=l(0),eo=l(0),to=l(0),no=l(0),ro=l(0),io=l(0),ao=l(0),oo=l(0),uo=l(0),so=l(0),co=l(0),lo=l(0),fo=l(0),ho=l(0),po=l(0),vo=l(0),yo=l(0),go=l(0),mo=l(0),bo=l(0),_o=l(0),wo=l(0),xo=l(0),Eo=l(0),So=l(0),ko=l(0),Mo=l(0),Ao=l(0),Co=l(0),Do=l(0),Ko=l(0),Ro=l(0),Po=l(0),Oo=l(0),To=l(0),Io=l(0),Bo=l(0),Fo=l(0),jo=l(0),No=l(0),Lo=l(0),Uo=l(0),Vo=l(0),Ho=l(0),Wo=l(0),zo=l(0),Yo=l(0),Qo=l(0),Xo=l(0),Go=l(0),qo=l(0),Jo=l(0),$o=l(0),Zo=l(0),eu=l(0),tu=l(0),nu=l(0),ru=l(0),iu=l(0),au=l(0),ou=l(0),uu=l(0),su=l(0),cu=l(0),lu=l(0),fu=l(0),hu=l(0),du=l(0),pu=l(0),vu=l(0),yu=l(0),gu=l(0),mu=l(0),bu=l(0),_u=l(0),wu=l(0),xu=l(0);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.
Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.
THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var P=function(){return P=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},P.apply(this,arguments)};function Pt(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,a;r<i;r++)(a||!(r in t))&&(a||(a=Array.prototype.slice.call(t,0,r)),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))}var F=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,N=Object.keys,H=Array.isArray;typeof Promise<"u"&&!F.Promise&&(F.Promise=Promise);function z(e,t){return typeof t!="object"||N(t).forEach(function(n){e[n]=t[n]}),e}var Le=Object.getPrototypeOf,br={}.hasOwnProperty;function Q(e,t){return br.call(e,t)}function De(e,t){typeof t=="function"&&(t=t(Le(e))),(typeof Reflect>"u"?N:Reflect.ownKeys)(t).forEach(function(n){se(e,n,t[n])})}var jn=Object.defineProperty;function se(e,t,n,r){jn(e,t,z(n&&Q(n,"get")&&typeof n.get=="function"?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function Ke(e){return{from:function(t){return e.prototype=Object.create(t.prototype),se(e.prototype,"constructor",e),{extend:De.bind(null,e.prototype)}}}}var _r=Object.getOwnPropertyDescriptor;function nn(e,t){var n=_r(e,t),r;return n||(r=Le(e))&&nn(r,t)}var wr=[].slice;function wt(e,t,n){return wr.call(e,t,n)}function Nn(e,t){return t(e)}function Ie(e){if(!e)throw new Error("Assertion Failed")}function Ln(e){F.setImmediate?setImmediate(e):setTimeout(e,0)}function Un(e,t){return e.reduce(function(n,r,i){var a=t(r,i);return a&&(n[a[0]]=a[1]),n},{})}function xr(e,t,n){try{e.apply(null,n)}catch(r){t&&t(r)}}function ue(e,t){if(Q(e,t))return e[t];if(!t)return e;if(typeof t!="string"){for(var n=[],r=0,i=t.length;r<i;++r){var a=ue(e,t[r]);n.push(a)}return n}var o=t.indexOf(".");if(o!==-1){var u=e[t.substr(0,o)];return u===void 0?void 0:ue(u,t.substr(o+1))}}function $(e,t,n){if(!(!e||t===void 0)&&!("isFrozen"in Object&&Object.isFrozen(e)))if(typeof t!="string"&&"length"in t){Ie(typeof n!="string"&&"length"in n);for(var r=0,i=t.length;r<i;++r)$(e,t[r],n[r])}else{var a=t.indexOf(".");if(a!==-1){var o=t.substr(0,a),u=t.substr(a+1);if(u==="")n===void 0?H(e)&&!isNaN(parseInt(o))?e.splice(o,1):delete e[o]:e[o]=n;else{var s=e[o];(!s||!Q(e,o))&&(s=e[o]={}),$(s,u,n)}}else n===void 0?H(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=n}}function Er(e,t){typeof t=="string"?$(e,t,void 0):"length"in t&&[].map.call(t,function(n){$(e,n,void 0)})}function Vn(e){var t={};for(var n in e)Q(e,n)&&(t[n]=e[n]);return t}var Sr=[].concat;function Hn(e){return Sr.apply([],e)}var Wn="Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(Hn([8,16,32,64].map(function(e){return["Int","Uint","Float"].map(function(t){return t+e+"Array"})}))).filter(function(e){return F[e]}),kr=Wn.map(function(e){return F[e]});Un(Wn,function(e){return[e,!0]});var de=null;function Qe(e){de=typeof WeakMap<"u"&&new WeakMap;var t=Ot(e);return de=null,t}function Ot(e){if(!e||typeof e!="object")return e;var t=de&&de.get(e);if(t)return t;if(H(e)){t=[],de&&de.set(e,t);for(var n=0,r=e.length;n<r;++n)t.push(Ot(e[n]))}else if(kr.indexOf(e.constructor)>=0)t=e;else{var i=Le(e);t=i===Object.prototype?{}:Object.create(i),de&&de.set(e,t);for(var a in e)Q(e,a)&&(t[a]=Ot(e[a]))}return t}var Mr={}.toString;function Tt(e){return Mr.call(e).slice(8,-1)}var It=typeof Symbol<"u"?Symbol.iterator:"@@iterator",Ar=typeof It=="symbol"?function(e){var t;return e!=null&&(t=e[It])&&t.apply(e)}:function(){return null},Ae={};function ae(e){var t,n,r,i;if(arguments.length===1){if(H(e))return e.slice();if(this===Ae&&typeof e=="string")return[e];if(i=Ar(e)){for(n=[];r=i.next(),!r.done;)n.push(r.value);return n}if(e==null)return[e];if(t=e.length,typeof t=="number"){for(n=new Array(t);t--;)n[t]=e[t];return n}return[e]}for(t=arguments.length,n=new Array(t);t--;)n[t]=arguments[t];return n}var rn=typeof Symbol<"u"?function(e){return e[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},ne=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function zn(e,t){ne=e,Yn=t}var Yn=function(){return!0},Cr=!new Error("").stack;function Se(){if(Cr)try{throw Se.arguments,new Error}catch(e){return e}return new Error}function Bt(e,t){var n=e.stack;return n?(t=t||0,n.indexOf(e.name)===0&&(t+=(e.name+e.message).split(`
`).length),n.split(`
`).slice(t).filter(Yn).map(function(r){return`
`+r}).join("")):""}var Dr=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"],Qn=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],an=Dr.concat(Qn),Kr={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Re(e,t){this._e=Se(),this.name=e,this.message=t}Ke(Re).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+Bt(this._e,2))}},toString:function(){return this.name+": "+this.message}});function Xn(e,t){return e+". Errors: "+Object.keys(t).map(function(n){return t[n].toString()}).filter(function(n,r,i){return i.indexOf(n)===r}).join(`
`)}function ht(e,t,n,r){this._e=Se(),this.failures=t,this.failedKeys=r,this.successCount=n,this.message=Xn(e,t)}Ke(ht).from(Re);function Fe(e,t){this._e=Se(),this.name="BulkError",this.failures=Object.keys(t).map(function(n){return t[n]}),this.failuresByPos=t,this.message=Xn(e,t)}Ke(Fe).from(Re);var on=an.reduce(function(e,t){return e[t]=t+"Error",e},{}),Rr=Re,D=an.reduce(function(e,t){var n=t+"Error";function r(i,a){this._e=Se(),this.name=n,i?typeof i=="string"?(this.message=""+i+(a?`
 `+a:""),this.inner=a||null):typeof i=="object"&&(this.message=i.name+" "+i.message,this.inner=i):(this.message=Kr[t]||n,this.inner=null)}return Ke(r).from(Rr),e[t]=r,e},{});D.Syntax=SyntaxError;D.Type=TypeError;D.Range=RangeError;var wn=Qn.reduce(function(e,t){return e[t+"Error"]=D[t],e},{});function Pr(e,t){if(!e||e instanceof Re||e instanceof TypeError||e instanceof SyntaxError||!e.name||!wn[e.name])return e;var n=new wn[e.name](t||e.message,e);return"stack"in e&&se(n,"stack",{get:function(){return this.inner.stack}}),n}var xt=an.reduce(function(e,t){return["Syntax","Type","Range"].indexOf(t)===-1&&(e[t+"Error"]=D[t]),e},{});xt.ModifyError=ht;xt.DexieError=Re;xt.BulkError=Fe;function B(){}function Xe(e){return e}function Or(e,t){return e==null||e===Xe?t:function(n){return t(e(n))}}function xe(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function Tr(e,t){return e===B?t:function(){var n=e.apply(this,arguments);n!==void 0&&(arguments[0]=n);var r=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var a=t.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?xe(r,this.onsuccess):r),i&&(this.onerror=this.onerror?xe(i,this.onerror):i),a!==void 0?a:n}}function Ir(e,t){return e===B?t:function(){e.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?xe(n,this.onsuccess):n),r&&(this.onerror=this.onerror?xe(r,this.onerror):r)}}function Br(e,t){return e===B?t:function(n){var r=e.apply(this,arguments);z(n,r);var i=this.onsuccess,a=this.onerror;this.onsuccess=null,this.onerror=null;var o=t.apply(this,arguments);return i&&(this.onsuccess=this.onsuccess?xe(i,this.onsuccess):i),a&&(this.onerror=this.onerror?xe(a,this.onerror):a),r===void 0?o===void 0?void 0:o:z(r,o)}}function Fr(e,t){return e===B?t:function(){return t.apply(this,arguments)===!1?!1:e.apply(this,arguments)}}function un(e,t){return e===B?t:function(){var n=e.apply(this,arguments);if(n&&typeof n.then=="function"){for(var r=this,i=arguments.length,a=new Array(i);i--;)a[i]=arguments[i];return n.then(function(){return t.apply(r,a)})}return t.apply(this,arguments)}}var Ue={},jr=100,Nr=20,Gn=100,sn=typeof Promise>"u"?[]:function(){var e=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[e,Le(e),e];var t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,Le(t),e]}(),Ft=sn[0],dt=sn[1],jt=sn[2],qn=dt&&dt.then,ot=Ft&&Ft.constructor,cn=!!jt,Nt=!1,Lr=jt?function(){jt.then(et)}:F.setImmediate?setImmediate.bind(null,et):F.MutationObserver?function(){var e=document.createElement("div");new MutationObserver(function(){et(),e=null}).observe(e,{attributes:!0}),e.setAttribute("i","1")}:function(){setTimeout(et,0)},Ve=function(e,t){Be.push([e,t]),pt&&(Lr(),pt=!1)},Lt=!0,pt=!0,_e=[],ut=[],Ut=null,Vt=Xe,Ce={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Sn,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach(function(e){try{Sn(e[0],e[1])}catch{}})}},M=Ce,Be=[],we=0,st=[];function k(e){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=B,this._lib=!1;var t=this._PSD=M;if(ne&&(this._stackHolder=Se(),this._prev=null,this._numPrev=0),typeof e!="function"){if(e!==Ue)throw new TypeError("Not a function");this._state=arguments[1],this._value=arguments[2],this._state===!1&&Wt(this,this._value);return}this._state=null,this._value=null,++t.ref,$n(this,e)}var Ht={get:function(){var e=M,t=vt;function n(r,i){var a=this,o=!e.global&&(e!==M||t!==vt),u=o&&!ce(),s=new k(function(c,h){ln(a,new Jn(gt(r,e,o,u),gt(i,e,o,u),c,h,e))});return ne&&tr(s,this),s}return n.prototype=Ue,n},set:function(e){se(this,"then",e&&e.prototype===Ue?Ht:{get:function(){return e},set:Ht.set})}};De(k.prototype,{then:Ht,_then:function(e,t){ln(this,new Jn(null,null,e,t,M))},catch:function(e){if(arguments.length===1)return this.then(null,e);var t=arguments[0],n=arguments[1];return typeof t=="function"?this.then(null,function(r){return r instanceof t?n(r):ct(r)}):this.then(null,function(r){return r&&r.name===t?n(r):ct(r)})},finally:function(e){return this.then(function(t){return e(),t},function(t){return e(),ct(t)})},stack:{get:function(){if(this._stack)return this._stack;try{Nt=!0;var e=er(this,[],Nr),t=e.join(`
From previous: `);return this._state!==null&&(this._stack=t),t}finally{Nt=!1}}},timeout:function(e,t){var n=this;return e<1/0?new k(function(r,i){var a=setTimeout(function(){return i(new D.Timeout(t))},e);n.then(r,i).finally(clearTimeout.bind(null,a))}):this}});typeof Symbol<"u"&&Symbol.toStringTag&&se(k.prototype,Symbol.toStringTag,"Dexie.Promise");Ce.env=nr();function Jn(e,t,n,r,i){this.onFulfilled=typeof e=="function"?e:null,this.onRejected=typeof t=="function"?t:null,this.resolve=n,this.reject=r,this.psd=i}De(k,{all:function(){var e=ae.apply(null,arguments).map(yt);return new k(function(t,n){e.length===0&&t([]);var r=e.length;e.forEach(function(i,a){return k.resolve(i).then(function(o){e[a]=o,--r||t(e)},n)})})},resolve:function(e){if(e instanceof k)return e;if(e&&typeof e.then=="function")return new k(function(n,r){e.then(n,r)});var t=new k(Ue,!0,e);return tr(t,Ut),t},reject:ct,race:function(){var e=ae.apply(null,arguments).map(yt);return new k(function(t,n){e.map(function(r){return k.resolve(r).then(t,n)})})},PSD:{get:function(){return M},set:function(e){return M=e}},totalEchoes:{get:function(){return vt}},newPSD:ve,usePSD:Oe,scheduler:{get:function(){return Ve},set:function(e){Ve=e}},rejectionMapper:{get:function(){return Vt},set:function(e){Vt=e}},follow:function(e,t){return new k(function(n,r){return ve(function(i,a){var o=M;o.unhandleds=[],o.onunhandled=a,o.finalize=xe(function(){var u=this;Vr(function(){u.unhandleds.length===0?i():a(u.unhandleds[0])})},o.finalize),e()},t,n,r)})}});ot&&(ot.allSettled&&se(k,"allSettled",function(){var e=ae.apply(null,arguments).map(yt);return new k(function(t){e.length===0&&t([]);var n=e.length,r=new Array(n);e.forEach(function(i,a){return k.resolve(i).then(function(o){return r[a]={status:"fulfilled",value:o}},function(o){return r[a]={status:"rejected",reason:o}}).then(function(){return--n||t(r)})})})}),ot.any&&typeof AggregateError<"u"&&se(k,"any",function(){var e=ae.apply(null,arguments).map(yt);return new k(function(t,n){e.length===0&&n(new AggregateError([]));var r=e.length,i=new Array(r);e.forEach(function(a,o){return k.resolve(a).then(function(u){return t(u)},function(u){i[o]=u,--r||n(new AggregateError(i))})})})}));function $n(e,t){try{t(function(n){if(e._state===null){if(n===e)throw new TypeError("A promise cannot be resolved with itself.");var r=e._lib&&Ge();n&&typeof n.then=="function"?$n(e,function(i,a){n instanceof k?n._then(i,a):n.then(i,a)}):(e._state=!0,e._value=n,Zn(e)),r&&qe()}},Wt.bind(null,e))}catch(n){Wt(e,n)}}function Wt(e,t){if(ut.push(t),e._state===null){var n=e._lib&&Ge();t=Vt(t),e._state=!1,e._value=t,ne&&t!==null&&typeof t=="object"&&!t._promise&&xr(function(){var r=nn(t,"stack");t._promise=e,se(t,"stack",{get:function(){return Nt?r&&(r.get?r.get.apply(t):r.value):e.stack}})}),Hr(e),Zn(e),n&&qe()}}function Zn(e){var t=e._listeners;e._listeners=[];for(var n=0,r=t.length;n<r;++n)ln(e,t[n]);var i=e._PSD;--i.ref||i.finalize(),we===0&&(++we,Ve(function(){--we===0&&fn()},[]))}function ln(e,t){if(e._state===null){e._listeners.push(t);return}var n=e._state?t.onFulfilled:t.onRejected;if(n===null)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++we,Ve(Ur,[n,e,t])}function Ur(e,t,n){try{Ut=t;var r,i=t._value;t._state?r=e(i):(ut.length&&(ut=[]),r=e(i),ut.indexOf(i)===-1&&Wr(t)),n.resolve(r)}catch(a){n.reject(a)}finally{Ut=null,--we===0&&fn(),--n.psd.ref||n.psd.finalize()}}function er(e,t,n){if(t.length===n)return t;var r="";if(e._state===!1){var i=e._value,a,o;i!=null?(a=i.name||"Error",o=i.message||i,r=Bt(i,0)):(a=i,o=""),t.push(a+(o?": "+o:"")+r)}return ne&&(r=Bt(e._stackHolder,2),r&&t.indexOf(r)===-1&&t.push(r),e._prev&&er(e._prev,t,n)),t}function tr(e,t){var n=t?t._numPrev+1:0;n<jr&&(e._prev=t,e._numPrev=n)}function et(){Ge()&&qe()}function Ge(){var e=Lt;return Lt=!1,pt=!1,e}function qe(){var e,t,n;do for(;Be.length>0;)for(e=Be,Be=[],n=e.length,t=0;t<n;++t){var r=e[t];r[0].apply(null,r[1])}while(Be.length>0);Lt=!0,pt=!0}function fn(){var e=_e;_e=[],e.forEach(function(r){r._PSD.onunhandled.call(null,r._value,r)});for(var t=st.slice(0),n=t.length;n;)t[--n]()}function Vr(e){function t(){e(),st.splice(st.indexOf(t),1)}st.push(t),++we,Ve(function(){--we===0&&fn()},[])}function Hr(e){_e.some(function(t){return t._value===e._value})||_e.push(e)}function Wr(e){for(var t=_e.length;t;)if(_e[--t]._value===e._value){_e.splice(t,1);return}}function ct(e){return new k(Ue,!1,e)}function j(e,t){var n=M;return function(){var r=Ge(),i=M;try{return ye(n,!0),e.apply(this,arguments)}catch(a){t&&t(a)}finally{ye(i,!1),r&&qe()}}}var V={awaits:0,echoes:0,id:0},zr=0,lt=[],kt=0,vt=0,Yr=0;function ve(e,t,n,r){var i=M,a=Object.create(i);a.parent=i,a.ref=0,a.global=!1,a.id=++Yr;var o=Ce.env;a.env=cn?{Promise:k,PromiseProp:{value:k,configurable:!0,writable:!0},all:k.all,race:k.race,allSettled:k.allSettled,any:k.any,resolve:k.resolve,reject:k.reject,nthen:xn(o.nthen,a),gthen:xn(o.gthen,a)}:{},t&&z(a,t),++i.ref,a.finalize=function(){--this.parent.ref||this.parent.finalize()};var u=Oe(a,e,n,r);return a.ref===0&&a.finalize(),u}function Pe(){return V.id||(V.id=++zr),++V.awaits,V.echoes+=Gn,V.id}function ce(){return V.awaits?(--V.awaits===0&&(V.id=0),V.echoes=V.awaits*Gn,!0):!1}(""+qn).indexOf("[native code]")===-1&&(Pe=ce=B);function yt(e){return V.echoes&&e&&e.constructor===ot?(Pe(),e.then(function(t){return ce(),t},function(t){return ce(),L(t)})):e}function Qr(e){++vt,(!V.echoes||--V.echoes===0)&&(V.echoes=V.id=0),lt.push(M),ye(e,!0)}function Xr(){var e=lt[lt.length-1];lt.pop(),ye(e,!1)}function ye(e,t){var n=M;if((t?V.echoes&&(!kt++||e!==M):kt&&(!--kt||e!==M))&&rr(t?Qr.bind(null,e):Xr),e!==M&&(M=e,n===Ce&&(Ce.env=nr()),cn)){var r=Ce.env.Promise,i=e.env;dt.then=i.nthen,r.prototype.then=i.gthen,(n.global||e.global)&&(Object.defineProperty(F,"Promise",i.PromiseProp),r.all=i.all,r.race=i.race,r.resolve=i.resolve,r.reject=i.reject,i.allSettled&&(r.allSettled=i.allSettled),i.any&&(r.any=i.any))}}function nr(){var e=F.Promise;return cn?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(F,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject,nthen:dt.then,gthen:e.prototype.then}:{}}function Oe(e,t,n,r,i){var a=M;try{return ye(e,!0),t(n,r,i)}finally{ye(a,!1)}}function rr(e){qn.call(Ft,e)}function gt(e,t,n,r){return typeof e!="function"?e:function(){var i=M;n&&Pe(),ye(t,!0);try{return e.apply(this,arguments)}finally{ye(i,!1),r&&rr(ce)}}}function xn(e,t){return function(n,r){return e.call(this,gt(n,t),gt(r,t))}}var En="unhandledrejection";function Sn(e,t){var n;try{n=t.onuncatched(e)}catch{}if(n!==!1)try{var r,i={promise:t,reason:e};if(F.document&&document.createEvent?(r=document.createEvent("Event"),r.initEvent(En,!0,!0),z(r,i)):F.CustomEvent&&(r=new CustomEvent(En,{detail:i}),z(r,i)),r&&F.dispatchEvent&&(dispatchEvent(r),!F.PromiseRejectionEvent&&F.onunhandledrejection))try{F.onunhandledrejection(r)}catch{}ne&&r&&!r.defaultPrevented&&console.warn("Unhandled rejection: "+(e.stack||e))}catch{}}var L=k.reject;function zt(e,t,n,r){if(!e.idbdb||!e._state.openComplete&&!M.letThrough&&!e._vip){if(e._state.openComplete)return L(new D.DatabaseClosed(e._state.dbOpenError));if(!e._state.isBeingOpened){if(!e._options.autoOpen)return L(new D.DatabaseClosed);e.open().catch(B)}return e._state.dbReadyPromise.then(function(){return zt(e,t,n,r)})}else{var i=e._createTransaction(t,n,e._dbSchema);try{i.create(),e._state.PR1398_maxLoop=3}catch(a){return a.name===on.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e._close(),e.open().then(function(){return zt(e,t,n,r)})):L(a)}return i._promise(t,function(a,o){return ve(function(){return M.trans=i,r(a,o,i)})}).then(function(a){return i._completion.then(function(){return a})})}}var kn="3.2.3",be=String.fromCharCode(65535),Yt=-1/0,re="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",ir="String expected.",je=[],Et=typeof navigator<"u"&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),Gr=Et,qr=Et,ar=function(e){return!/(dexie\.js|dexie\.min\.js)/.test(e)},St="__dbnames",Mt="readonly",At="readwrite";function Ee(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}var or={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function tt(e){return typeof e=="string"&&!/\./.test(e)?function(t){return t[e]===void 0&&e in t&&(t=Qe(t),delete t[e]),t}:function(t){return t}}var Jr=function(){function e(){}return e.prototype._trans=function(t,n,r){var i=this._tx||M.trans,a=this.name;function o(s,c,h){if(!h.schema[a])throw new D.NotFound("Table "+a+" not part of transaction");return n(h.idbtrans,h)}var u=Ge();try{return i&&i.db===this.db?i===M.trans?i._promise(t,o,r):ve(function(){return i._promise(t,o,r)},{trans:i,transless:M.transless||M}):zt(this.db,t,[this.name],o)}finally{u&&qe()}},e.prototype.get=function(t,n){var r=this;return t&&t.constructor===Object?this.where(t).first(n):this._trans("readonly",function(i){return r.core.get({trans:i,key:t}).then(function(a){return r.hook.reading.fire(a)})}).then(n)},e.prototype.where=function(t){if(typeof t=="string")return new this.db.WhereClause(this,t);if(H(t))return new this.db.WhereClause(this,"["+t.join("+")+"]");var n=N(t);if(n.length===1)return this.where(n[0]).equals(t[n[0]]);var r=this.schema.indexes.concat(this.schema.primKey).filter(function(h){return h.compound&&n.every(function(f){return h.keyPath.indexOf(f)>=0})&&h.keyPath.every(function(f){return n.indexOf(f)>=0})})[0];if(r&&this.db._maxKey!==be)return this.where(r.name).equals(r.keyPath.map(function(h){return t[h]}));!r&&ne&&console.warn("The query "+JSON.stringify(t)+" on "+this.name+" would benefit of a "+("compound index ["+n.join("+")+"]"));var i=this.schema.idxByName,a=this.db._deps.indexedDB;function o(h,f){try{return a.cmp(h,f)===0}catch{return!1}}var u=n.reduce(function(h,f){var p=h[0],_=h[1],v=i[f],d=t[f];return[p||v,p||!v?Ee(_,v&&v.multi?function(g){var w=ue(g,f);return H(w)&&w.some(function(x){return o(d,x)})}:function(g){return o(d,ue(g,f))}):_]},[null,null]),s=u[0],c=u[1];return s?this.where(s.name).equals(t[s.keyPath]).filter(c):r?this.filter(c):this.where(n).equals("")},e.prototype.filter=function(t){return this.toCollection().and(t)},e.prototype.count=function(t){return this.toCollection().count(t)},e.prototype.offset=function(t){return this.toCollection().offset(t)},e.prototype.limit=function(t){return this.toCollection().limit(t)},e.prototype.each=function(t){return this.toCollection().each(t)},e.prototype.toArray=function(t){return this.toCollection().toArray(t)},e.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},e.prototype.orderBy=function(t){return new this.db.Collection(new this.db.WhereClause(this,H(t)?"["+t.join("+")+"]":t))},e.prototype.reverse=function(){return this.toCollection().reverse()},e.prototype.mapToClass=function(t){this.schema.mappedClass=t;var n=function(r){if(!r)return r;var i=Object.create(t.prototype);for(var a in r)if(Q(r,a))try{i[a]=r[a]}catch{}return i};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=n,this.hook("reading",n),t},e.prototype.defineClass=function(){function t(n){z(this,n)}return this.mapToClass(t)},e.prototype.add=function(t,n){var r=this,i=this.schema.primKey,a=i.auto,o=i.keyPath,u=t;return o&&a&&(u=tt(o)(t)),this._trans("readwrite",function(s){return r.core.mutate({trans:s,type:"add",keys:n!=null?[n]:null,values:[u]})}).then(function(s){return s.numFailures?k.reject(s.failures[0]):s.lastResult}).then(function(s){if(o)try{$(t,o,s)}catch{}return s})},e.prototype.update=function(t,n){if(typeof t=="object"&&!H(t)){var r=ue(t,this.schema.primKey.keyPath);if(r===void 0)return L(new D.InvalidArgument("Given object does not contain its primary key"));try{typeof n!="function"?N(n).forEach(function(i){$(t,i,n[i])}):n(t,{value:t,primKey:r})}catch{}return this.where(":id").equals(r).modify(n)}else return this.where(":id").equals(t).modify(n)},e.prototype.put=function(t,n){var r=this,i=this.schema.primKey,a=i.auto,o=i.keyPath,u=t;return o&&a&&(u=tt(o)(t)),this._trans("readwrite",function(s){return r.core.mutate({trans:s,type:"put",values:[u],keys:n!=null?[n]:null})}).then(function(s){return s.numFailures?k.reject(s.failures[0]):s.lastResult}).then(function(s){if(o)try{$(t,o,s)}catch{}return s})},e.prototype.delete=function(t){var n=this;return this._trans("readwrite",function(r){return n.core.mutate({trans:r,type:"delete",keys:[t]})}).then(function(r){return r.numFailures?k.reject(r.failures[0]):void 0})},e.prototype.clear=function(){var t=this;return this._trans("readwrite",function(n){return t.core.mutate({trans:n,type:"deleteRange",range:or})}).then(function(n){return n.numFailures?k.reject(n.failures[0]):void 0})},e.prototype.bulkGet=function(t){var n=this;return this._trans("readonly",function(r){return n.core.getMany({keys:t,trans:r}).then(function(i){return i.map(function(a){return n.hook.reading.fire(a)})})})},e.prototype.bulkAdd=function(t,n,r){var i=this,a=Array.isArray(n)?n:void 0;r=r||(a?void 0:n);var o=r?r.allKeys:void 0;return this._trans("readwrite",function(u){var s=i.schema.primKey,c=s.auto,h=s.keyPath;if(h&&a)throw new D.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(a&&a.length!==t.length)throw new D.InvalidArgument("Arguments objects and keys must have the same length");var f=t.length,p=h&&c?t.map(tt(h)):t;return i.core.mutate({trans:u,type:"add",keys:a,values:p,wantResults:o}).then(function(_){var v=_.numFailures,d=_.results,g=_.lastResult,w=_.failures,x=o?d:g;if(v===0)return x;throw new Fe(i.name+".bulkAdd(): "+v+" of "+f+" operations failed",w)})})},e.prototype.bulkPut=function(t,n,r){var i=this,a=Array.isArray(n)?n:void 0;r=r||(a?void 0:n);var o=r?r.allKeys:void 0;return this._trans("readwrite",function(u){var s=i.schema.primKey,c=s.auto,h=s.keyPath;if(h&&a)throw new D.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(a&&a.length!==t.length)throw new D.InvalidArgument("Arguments objects and keys must have the same length");var f=t.length,p=h&&c?t.map(tt(h)):t;return i.core.mutate({trans:u,type:"put",keys:a,values:p,wantResults:o}).then(function(_){var v=_.numFailures,d=_.results,g=_.lastResult,w=_.failures,x=o?d:g;if(v===0)return x;throw new Fe(i.name+".bulkPut(): "+v+" of "+f+" operations failed",w)})})},e.prototype.bulkDelete=function(t){var n=this,r=t.length;return this._trans("readwrite",function(i){return n.core.mutate({trans:i,type:"delete",keys:t})}).then(function(i){var a=i.numFailures,o=i.lastResult,u=i.failures;if(a===0)return o;throw new Fe(n.name+".bulkDelete(): "+a+" of "+r+" operations failed",u)})},e}();function Je(e){var t={},n=function(u,s){if(s){for(var c=arguments.length,h=new Array(c-1);--c;)h[c-1]=arguments[c];return t[u].subscribe.apply(null,h),e}else if(typeof u=="string")return t[u]};n.addEventType=a;for(var r=1,i=arguments.length;r<i;++r)a(arguments[r]);return n;function a(u,s,c){if(typeof u=="object")return o(u);s||(s=Fr),c||(c=B);var h={subscribers:[],fire:c,subscribe:function(f){h.subscribers.indexOf(f)===-1&&(h.subscribers.push(f),h.fire=s(h.fire,f))},unsubscribe:function(f){h.subscribers=h.subscribers.filter(function(p){return p!==f}),h.fire=h.subscribers.reduce(s,c)}};return t[u]=n[u]=h,h}function o(u){N(u).forEach(function(s){var c=u[s];if(H(c))a(s,u[s][0],u[s][1]);else if(c==="asap")var h=a(s,Xe,function(){for(var p=arguments.length,_=new Array(p);p--;)_[p]=arguments[p];h.subscribers.forEach(function(v){Ln(function(){v.apply(null,_)})})});else throw new D.InvalidArgument("Invalid event config")})}}function $e(e,t){return Ke(t).from({prototype:e}),t}function $r(e){return $e(Jr.prototype,function(n,r,i){this.db=e,this._tx=i,this.name=n,this.schema=r,this.hook=e._allTables[n]?e._allTables[n].hook:Je(null,{creating:[Tr,B],reading:[Or,Xe],updating:[Br,B],deleting:[Ir,B]})})}function ke(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function Ct(e,t){e.filter=Ee(e.filter,t)}function Dt(e,t,n){var r=e.replayFilter;e.replayFilter=r?function(){return Ee(r(),t())}:t,e.justLimit=n&&!r}function Zr(e,t){e.isMatch=Ee(e.isMatch,t)}function ft(e,t){if(e.isPrimKey)return t.primaryKey;var n=t.getIndexByKeyPath(e.index);if(!n)throw new D.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return n}function Mn(e,t,n){var r=ft(e,t.schema);return t.openCursor({trans:n,values:!e.keysOnly,reverse:e.dir==="prev",unique:!!e.unique,query:{index:r,range:e.range}})}function nt(e,t,n,r){var i=e.replayFilter?Ee(e.filter,e.replayFilter()):e.filter;if(e.or){var a={},o=function(u,s,c){if(!i||i(s,c,function(p){return s.stop(p)},function(p){return s.fail(p)})){var h=s.primaryKey,f=""+h;f==="[object ArrayBuffer]"&&(f=""+new Uint8Array(h)),Q(a,f)||(a[f]=!0,t(u,s,c))}};return Promise.all([e.or._iterate(o,n),An(Mn(e,r,n),e.algorithm,o,!e.keysOnly&&e.valueMapper)])}else return An(Mn(e,r,n),Ee(e.algorithm,i),t,!e.keysOnly&&e.valueMapper)}function An(e,t,n,r){var i=r?function(o,u,s){return n(r(o),u,s)}:n,a=j(i);return e.then(function(o){if(o)return o.start(function(){var u=function(){return o.continue()};(!t||t(o,function(s){return u=s},function(s){o.stop(s),u=B},function(s){o.fail(s),u=B}))&&a(o.value,o,function(s){return u=s}),u()})})}function W(e,t){try{var n=Cn(e),r=Cn(t);if(n!==r)return n==="Array"?1:r==="Array"?-1:n==="binary"?1:r==="binary"?-1:n==="string"?1:r==="string"?-1:n==="Date"?1:r!=="Date"?NaN:-1;switch(n){case"number":case"Date":case"string":return e>t?1:e<t?-1:0;case"binary":return ti(Dn(e),Dn(t));case"Array":return ei(e,t)}}catch{}return NaN}function ei(e,t){for(var n=e.length,r=t.length,i=n<r?n:r,a=0;a<i;++a){var o=W(e[a],t[a]);if(o!==0)return o}return n===r?0:n<r?-1:1}function ti(e,t){for(var n=e.length,r=t.length,i=n<r?n:r,a=0;a<i;++a)if(e[a]!==t[a])return e[a]<t[a]?-1:1;return n===r?0:n<r?-1:1}function Cn(e){var t=typeof e;if(t!=="object")return t;if(ArrayBuffer.isView(e))return"binary";var n=Tt(e);return n==="ArrayBuffer"?"binary":n}function Dn(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}var ni=function(){function e(){}return e.prototype._read=function(t,n){var r=this._ctx;return r.error?r.table._trans(null,L.bind(null,r.error)):r.table._trans("readonly",t).then(n)},e.prototype._write=function(t){var n=this._ctx;return n.error?n.table._trans(null,L.bind(null,n.error)):n.table._trans("readwrite",t,"locked")},e.prototype._addAlgorithm=function(t){var n=this._ctx;n.algorithm=Ee(n.algorithm,t)},e.prototype._iterate=function(t,n){return nt(this._ctx,t,n,this._ctx.table.core)},e.prototype.clone=function(t){var n=Object.create(this.constructor.prototype),r=Object.create(this._ctx);return t&&z(r,t),n._ctx=r,n},e.prototype.raw=function(){return this._ctx.valueMapper=null,this},e.prototype.each=function(t){var n=this._ctx;return this._read(function(r){return nt(n,t,r,n.table.core)})},e.prototype.count=function(t){var n=this;return this._read(function(r){var i=n._ctx,a=i.table.core;if(ke(i,!0))return a.count({trans:r,query:{index:ft(i,a.schema),range:i.range}}).then(function(u){return Math.min(u,i.limit)});var o=0;return nt(i,function(){return++o,!1},r,a).then(function(){return o})}).then(t)},e.prototype.sortBy=function(t,n){var r=t.split(".").reverse(),i=r[0],a=r.length-1;function o(c,h){return h?o(c[r[h]],h-1):c[i]}var u=this._ctx.dir==="next"?1:-1;function s(c,h){var f=o(c,a),p=o(h,a);return f<p?-u:f>p?u:0}return this.toArray(function(c){return c.sort(s)}).then(n)},e.prototype.toArray=function(t){var n=this;return this._read(function(r){var i=n._ctx;if(i.dir==="next"&&ke(i,!0)&&i.limit>0){var a=i.valueMapper,o=ft(i,i.table.core.schema);return i.table.core.query({trans:r,limit:i.limit,values:!0,query:{index:o,range:i.range}}).then(function(s){var c=s.result;return a?c.map(a):c})}else{var u=[];return nt(i,function(s){return u.push(s)},r,i.table.core).then(function(){return u})}},t)},e.prototype.offset=function(t){var n=this._ctx;return t<=0?this:(n.offset+=t,ke(n)?Dt(n,function(){var r=t;return function(i,a){return r===0?!0:r===1?(--r,!1):(a(function(){i.advance(r),r=0}),!1)}}):Dt(n,function(){var r=t;return function(){return--r<0}}),this)},e.prototype.limit=function(t){return this._ctx.limit=Math.min(this._ctx.limit,t),Dt(this._ctx,function(){var n=t;return function(r,i,a){return--n<=0&&i(a),n>=0}},!0),this},e.prototype.until=function(t,n){return Ct(this._ctx,function(r,i,a){return t(r.value)?(i(a),n):!0}),this},e.prototype.first=function(t){return this.limit(1).toArray(function(n){return n[0]}).then(t)},e.prototype.last=function(t){return this.reverse().first(t)},e.prototype.filter=function(t){return Ct(this._ctx,function(n){return t(n.value)}),Zr(this._ctx,t),this},e.prototype.and=function(t){return this.filter(t)},e.prototype.or=function(t){return new this.db.WhereClause(this._ctx.table,t,this)},e.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},e.prototype.desc=function(){return this.reverse()},e.prototype.eachKey=function(t){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,i){t(i.key,i)})},e.prototype.eachUniqueKey=function(t){return this._ctx.unique="unique",this.eachKey(t)},e.prototype.eachPrimaryKey=function(t){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,i){t(i.primaryKey,i)})},e.prototype.keys=function(t){var n=this._ctx;n.keysOnly=!n.isMatch;var r=[];return this.each(function(i,a){r.push(a.key)}).then(function(){return r}).then(t)},e.prototype.primaryKeys=function(t){var n=this._ctx;if(n.dir==="next"&&ke(n,!0)&&n.limit>0)return this._read(function(i){var a=ft(n,n.table.core.schema);return n.table.core.query({trans:i,values:!1,limit:n.limit,query:{index:a,range:n.range}})}).then(function(i){var a=i.result;return a}).then(t);n.keysOnly=!n.isMatch;var r=[];return this.each(function(i,a){r.push(a.primaryKey)}).then(function(){return r}).then(t)},e.prototype.uniqueKeys=function(t){return this._ctx.unique="unique",this.keys(t)},e.prototype.firstKey=function(t){return this.limit(1).keys(function(n){return n[0]}).then(t)},e.prototype.lastKey=function(t){return this.reverse().firstKey(t)},e.prototype.distinct=function(){var t=this._ctx,n=t.index&&t.table.schema.idxByName[t.index];if(!n||!n.multi)return this;var r={};return Ct(this._ctx,function(i){var a=i.primaryKey.toString(),o=Q(r,a);return r[a]=!0,!o}),this},e.prototype.modify=function(t){var n=this,r=this._ctx;return this._write(function(i){var a;if(typeof t=="function")a=t;else{var o=N(t),u=o.length;a=function(w){for(var x=!1,m=0;m<u;++m){var b=o[m],y=t[b];ue(w,b)!==y&&($(w,b,y),x=!0)}return x}}var s=r.table.core,c=s.schema.primaryKey,h=c.outbound,f=c.extractKey,p=n.db._options.modifyChunkSize||200,_=[],v=0,d=[],g=function(w,x){var m=x.failures,b=x.numFailures;v+=w-b;for(var y=0,E=N(m);y<E.length;y++){var A=E[y];_.push(m[A])}};return n.clone().primaryKeys().then(function(w){var x=function(m){var b=Math.min(p,w.length-m);return s.getMany({trans:i,keys:w.slice(m,m+b),cache:"immutable"}).then(function(y){for(var E=[],A=[],S=h?[]:null,C=[],K=0;K<b;++K){var T=y[K],I={value:Qe(T),primKey:w[m+K]};a.call(I,I.value,I)!==!1&&(I.value==null?C.push(w[m+K]):!h&&W(f(T),f(I.value))!==0?(C.push(w[m+K]),E.push(I.value)):(A.push(I.value),h&&S.push(w[m+K])))}var O=ke(r)&&r.limit===1/0&&(typeof t!="function"||t===Kt)&&{index:r.index,range:r.range};return Promise.resolve(E.length>0&&s.mutate({trans:i,type:"add",values:E}).then(function(U){for(var R in U.failures)C.splice(parseInt(R),1);g(E.length,U)})).then(function(){return(A.length>0||O&&typeof t=="object")&&s.mutate({trans:i,type:"put",keys:S,values:A,criteria:O,changeSpec:typeof t!="function"&&t}).then(function(U){return g(A.length,U)})}).then(function(){return(C.length>0||O&&t===Kt)&&s.mutate({trans:i,type:"delete",keys:C,criteria:O}).then(function(U){return g(C.length,U)})}).then(function(){return w.length>m+b&&x(m+p)})})};return x(0).then(function(){if(_.length>0)throw new ht("Error modifying one or more objects",_,v,d);return w.length})})})},e.prototype.delete=function(){var t=this._ctx,n=t.range;return ke(t)&&(t.isPrimKey&&!qr||n.type===3)?this._write(function(r){var i=t.table.core.schema.primaryKey,a=n;return t.table.core.count({trans:r,query:{index:i,range:a}}).then(function(o){return t.table.core.mutate({trans:r,type:"deleteRange",range:a}).then(function(u){var s=u.failures;u.lastResult,u.results;var c=u.numFailures;if(c)throw new ht("Could not delete some values",Object.keys(s).map(function(h){return s[h]}),o-c);return o-c})})}):this.modify(Kt)},e}(),Kt=function(e,t){return t.value=null};function ri(e){return $e(ni.prototype,function(n,r){this.db=e;var i=or,a=null;if(r)try{i=r()}catch(c){a=c}var o=n._ctx,u=o.table,s=u.hook.reading.fire;this._ctx={table:u,index:o.index,isPrimKey:!o.index||u.schema.primKey.keyPath&&o.index===u.schema.primKey.name,range:i,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:a,or:o.or,valueMapper:s!==Xe?s:null}})}function ii(e,t){return e<t?-1:e===t?0:1}function ai(e,t){return e>t?-1:e===t?0:1}function Y(e,t,n){var r=e instanceof sr?new e.Collection(e):e;return r._ctx.error=n?new n(t):new TypeError(t),r}function Me(e){return new e.Collection(e,function(){return ur("")}).limit(0)}function oi(e){return e==="next"?function(t){return t.toUpperCase()}:function(t){return t.toLowerCase()}}function ui(e){return e==="next"?function(t){return t.toLowerCase()}:function(t){return t.toUpperCase()}}function si(e,t,n,r,i,a){for(var o=Math.min(e.length,r.length),u=-1,s=0;s<o;++s){var c=t[s];if(c!==r[s])return i(e[s],n[s])<0?e.substr(0,s)+n[s]+n.substr(s+1):i(e[s],r[s])<0?e.substr(0,s)+r[s]+n.substr(s+1):u>=0?e.substr(0,u)+t[u]+n.substr(u+1):null;i(e[s],c)<0&&(u=s)}return o<r.length&&a==="next"?e+n.substr(e.length):o<e.length&&a==="prev"?e.substr(0,n.length):u<0?null:e.substr(0,u)+r[u]+n.substr(u+1)}function rt(e,t,n,r){var i,a,o,u,s,c,h,f=n.length;if(!n.every(function(d){return typeof d=="string"}))return Y(e,ir);function p(d){i=oi(d),a=ui(d),o=d==="next"?ii:ai;var g=n.map(function(w){return{lower:a(w),upper:i(w)}}).sort(function(w,x){return o(w.lower,x.lower)});u=g.map(function(w){return w.upper}),s=g.map(function(w){return w.lower}),c=d,h=d==="next"?"":r}p("next");var _=new e.Collection(e,function(){return he(u[0],s[f-1]+r)});_._ondirectionchange=function(d){p(d)};var v=0;return _._addAlgorithm(function(d,g,w){var x=d.key;if(typeof x!="string")return!1;var m=a(x);if(t(m,s,v))return!0;for(var b=null,y=v;y<f;++y){var E=si(x,m,u[y],s[y],o,c);E===null&&b===null?v=y+1:(b===null||o(b,E)>0)&&(b=E)}return g(b!==null?function(){d.continue(b+h)}:w),!1}),_}function he(e,t,n,r){return{type:2,lower:e,upper:t,lowerOpen:n,upperOpen:r}}function ur(e){return{type:1,lower:e,upper:e}}var sr=function(){function e(){}return Object.defineProperty(e.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),e.prototype.between=function(t,n,r,i){r=r!==!1,i=i===!0;try{return this._cmp(t,n)>0||this._cmp(t,n)===0&&(r||i)&&!(r&&i)?Me(this):new this.Collection(this,function(){return he(t,n,!r,!i)})}catch{return Y(this,re)}},e.prototype.equals=function(t){return t==null?Y(this,re):new this.Collection(this,function(){return ur(t)})},e.prototype.above=function(t){return t==null?Y(this,re):new this.Collection(this,function(){return he(t,void 0,!0)})},e.prototype.aboveOrEqual=function(t){return t==null?Y(this,re):new this.Collection(this,function(){return he(t,void 0,!1)})},e.prototype.below=function(t){return t==null?Y(this,re):new this.Collection(this,function(){return he(void 0,t,!1,!0)})},e.prototype.belowOrEqual=function(t){return t==null?Y(this,re):new this.Collection(this,function(){return he(void 0,t)})},e.prototype.startsWith=function(t){return typeof t!="string"?Y(this,ir):this.between(t,t+be,!0,!0)},e.prototype.startsWithIgnoreCase=function(t){return t===""?this.startsWith(t):rt(this,function(n,r){return n.indexOf(r[0])===0},[t],be)},e.prototype.equalsIgnoreCase=function(t){return rt(this,function(n,r){return n===r[0]},[t],"")},e.prototype.anyOfIgnoreCase=function(){var t=ae.apply(Ae,arguments);return t.length===0?Me(this):rt(this,function(n,r){return r.indexOf(n)!==-1},t,"")},e.prototype.startsWithAnyOfIgnoreCase=function(){var t=ae.apply(Ae,arguments);return t.length===0?Me(this):rt(this,function(n,r){return r.some(function(i){return n.indexOf(i)===0})},t,be)},e.prototype.anyOf=function(){var t=this,n=ae.apply(Ae,arguments),r=this._cmp;try{n.sort(r)}catch{return Y(this,re)}if(n.length===0)return Me(this);var i=new this.Collection(this,function(){return he(n[0],n[n.length-1])});i._ondirectionchange=function(o){r=o==="next"?t._ascending:t._descending,n.sort(r)};var a=0;return i._addAlgorithm(function(o,u,s){for(var c=o.key;r(c,n[a])>0;)if(++a,a===n.length)return u(s),!1;return r(c,n[a])===0?!0:(u(function(){o.continue(n[a])}),!1)}),i},e.prototype.notEqual=function(t){return this.inAnyRange([[Yt,t],[t,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},e.prototype.noneOf=function(){var t=ae.apply(Ae,arguments);if(t.length===0)return new this.Collection(this);try{t.sort(this._ascending)}catch{return Y(this,re)}var n=t.reduce(function(r,i){return r?r.concat([[r[r.length-1][1],i]]):[[Yt,i]]},null);return n.push([t[t.length-1],this.db._maxKey]),this.inAnyRange(n,{includeLowers:!1,includeUppers:!1})},e.prototype.inAnyRange=function(t,n){var r=this,i=this._cmp,a=this._ascending,o=this._descending,u=this._min,s=this._max;if(t.length===0)return Me(this);if(!t.every(function(y){return y[0]!==void 0&&y[1]!==void 0&&a(y[0],y[1])<=0}))return Y(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",D.InvalidArgument);var c=!n||n.includeLowers!==!1,h=n&&n.includeUppers===!0;function f(y,E){for(var A=0,S=y.length;A<S;++A){var C=y[A];if(i(E[0],C[1])<0&&i(E[1],C[0])>0){C[0]=u(C[0],E[0]),C[1]=s(C[1],E[1]);break}}return A===S&&y.push(E),y}var p=a;function _(y,E){return p(y[0],E[0])}var v;try{v=t.reduce(f,[]),v.sort(_)}catch{return Y(this,re)}var d=0,g=h?function(y){return a(y,v[d][1])>0}:function(y){return a(y,v[d][1])>=0},w=c?function(y){return o(y,v[d][0])>0}:function(y){return o(y,v[d][0])>=0};function x(y){return!g(y)&&!w(y)}var m=g,b=new this.Collection(this,function(){return he(v[0][0],v[v.length-1][1],!c,!h)});return b._ondirectionchange=function(y){y==="next"?(m=g,p=a):(m=w,p=o),v.sort(_)},b._addAlgorithm(function(y,E,A){for(var S=y.key;m(S);)if(++d,d===v.length)return E(A),!1;return x(S)?!0:(r._cmp(S,v[d][1])===0||r._cmp(S,v[d][0])===0||E(function(){p===a?y.continue(v[d][0]):y.continue(v[d][1])}),!1)}),b},e.prototype.startsWithAnyOf=function(){var t=ae.apply(Ae,arguments);return t.every(function(n){return typeof n=="string"})?t.length===0?Me(this):this.inAnyRange(t.map(function(n){return[n,n+be]})):Y(this,"startsWithAnyOf() only works with strings")},e}();function ci(e){return $e(sr.prototype,function(n,r,i){this.db=e,this._ctx={table:n,index:r===":id"?null:r,or:i};var a=e._deps.indexedDB;if(!a)throw new D.MissingAPI;this._cmp=this._ascending=a.cmp.bind(a),this._descending=function(o,u){return a.cmp(u,o)},this._max=function(o,u){return a.cmp(o,u)>0?o:u},this._min=function(o,u){return a.cmp(o,u)<0?o:u},this._IDBKeyRange=e._deps.IDBKeyRange})}function te(e){return j(function(t){return He(t),e(t.target.error),!1})}function He(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}var We="storagemutated",pe="x-storagemutated-1",ge=Je(null,We),li=function(){function e(){}return e.prototype._lock=function(){return Ie(!M.global),++this._reculock,this._reculock===1&&!M.global&&(M.lockOwnerFor=this),this},e.prototype._unlock=function(){if(Ie(!M.global),--this._reculock===0)for(M.global||(M.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var t=this._blockedFuncs.shift();try{Oe(t[1],t[0])}catch{}}return this},e.prototype._locked=function(){return this._reculock&&M.lockOwnerFor!==this},e.prototype.create=function(t){var n=this;if(!this.mode)return this;var r=this.db.idbdb,i=this.db._state.dbOpenError;if(Ie(!this.idbtrans),!t&&!r)switch(i&&i.name){case"DatabaseClosedError":throw new D.DatabaseClosed(i);case"MissingAPIError":throw new D.MissingAPI(i.message,i);default:throw new D.OpenFailed(i)}if(!this.active)throw new D.TransactionInactive;return Ie(this._completion._state===null),t=this.idbtrans=t||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):r.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})),t.onerror=j(function(a){He(a),n._reject(t.error)}),t.onabort=j(function(a){He(a),n.active&&n._reject(new D.Abort(t.error)),n.active=!1,n.on("abort").fire(a)}),t.oncomplete=j(function(){n.active=!1,n._resolve(),"mutatedParts"in t&&ge.storagemutated.fire(t.mutatedParts)}),this},e.prototype._promise=function(t,n,r){var i=this;if(t==="readwrite"&&this.mode!=="readwrite")return L(new D.ReadOnly("Transaction is readonly"));if(!this.active)return L(new D.TransactionInactive);if(this._locked())return new k(function(o,u){i._blockedFuncs.push([function(){i._promise(t,n,r).then(o,u)},M])});if(r)return ve(function(){var o=new k(function(u,s){i._lock();var c=n(u,s,i);c&&c.then&&c.then(u,s)});return o.finally(function(){return i._unlock()}),o._lib=!0,o});var a=new k(function(o,u){var s=n(o,u,i);s&&s.then&&s.then(o,u)});return a._lib=!0,a},e.prototype._root=function(){return this.parent?this.parent._root():this},e.prototype.waitFor=function(t){var n=this._root(),r=k.resolve(t);if(n._waitingFor)n._waitingFor=n._waitingFor.then(function(){return r});else{n._waitingFor=r,n._waitingQueue=[];var i=n.idbtrans.objectStore(n.storeNames[0]);(function o(){for(++n._spinCount;n._waitingQueue.length;)n._waitingQueue.shift()();n._waitingFor&&(i.get(-1/0).onsuccess=o)})()}var a=n._waitingFor;return new k(function(o,u){r.then(function(s){return n._waitingQueue.push(j(o.bind(null,s)))},function(s){return n._waitingQueue.push(j(u.bind(null,s)))}).finally(function(){n._waitingFor===a&&(n._waitingFor=null)})})},e.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new D.Abort))},e.prototype.table=function(t){var n=this._memoizedTables||(this._memoizedTables={});if(Q(n,t))return n[t];var r=this.schema[t];if(!r)throw new D.NotFound("Table "+t+" not part of transaction");var i=new this.db.Table(t,r,this);return i.core=this.db.core.table(t),n[t]=i,i},e}();function fi(e){return $e(li.prototype,function(n,r,i,a,o){var u=this;this.db=e,this.mode=n,this.storeNames=r,this.schema=i,this.chromeTransactionDurability=a,this.idbtrans=null,this.on=Je(this,"complete","error","abort"),this.parent=o||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new k(function(s,c){u._resolve=s,u._reject=c}),this._completion.then(function(){u.active=!1,u.on.complete.fire()},function(s){var c=u.active;return u.active=!1,u.on.error.fire(s),u.parent?u.parent._reject(s):c&&u.idbtrans&&u.idbtrans.abort(),L(s)})})}function Qt(e,t,n,r,i,a,o){return{name:e,keyPath:t,unique:n,multi:r,auto:i,compound:a,src:(n&&!o?"&":"")+(r?"*":"")+(i?"++":"")+cr(t)}}function cr(e){return typeof e=="string"?e:e?"["+[].join.call(e,"+")+"]":""}function lr(e,t,n){return{name:e,primKey:t,indexes:n,mappedClass:null,idxByName:Un(n,function(r){return[r.name,r]})}}function hi(e){return e.length===1?e[0]:e}var ze=function(e){try{return e.only([[]]),ze=function(){return[[]]},[[]]}catch{return ze=function(){return be},be}};function Xt(e){return e==null?function(){}:typeof e=="string"?di(e):function(t){return ue(t,e)}}function di(e){var t=e.split(".");return t.length===1?function(n){return n[e]}:function(n){return ue(n,e)}}function Kn(e){return[].slice.call(e)}var pi=0;function Ne(e){return e==null?":id":typeof e=="string"?e:"["+e.join("+")+"]"}function vi(e,t,n){function r(f,p){var _=Kn(f.objectStoreNames);return{schema:{name:f.name,tables:_.map(function(v){return p.objectStore(v)}).map(function(v){var d=v.keyPath,g=v.autoIncrement,w=H(d),x=d==null,m={},b={name:v.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:x,compound:w,keyPath:d,autoIncrement:g,unique:!0,extractKey:Xt(d)},indexes:Kn(v.indexNames).map(function(y){return v.index(y)}).map(function(y){var E=y.name,A=y.unique,S=y.multiEntry,C=y.keyPath,K=H(C),T={name:E,compound:K,keyPath:C,unique:A,multiEntry:S,extractKey:Xt(C)};return m[Ne(C)]=T,T}),getIndexByKeyPath:function(y){return m[Ne(y)]}};return m[":id"]=b.primaryKey,d!=null&&(m[Ne(d)]=b.primaryKey),b})},hasGetAll:_.length>0&&"getAll"in p.objectStore(_[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}function i(f){if(f.type===3)return null;if(f.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var p=f.lower,_=f.upper,v=f.lowerOpen,d=f.upperOpen,g=p===void 0?_===void 0?null:t.upperBound(_,!!d):_===void 0?t.lowerBound(p,!!v):t.bound(p,_,!!v,!!d);return g}function a(f){var p=f.name;function _(g){var w=g.trans,x=g.type,m=g.keys,b=g.values,y=g.range;return new Promise(function(E,A){E=j(E);var S=w.objectStore(p),C=S.keyPath==null,K=x==="put"||x==="add";if(!K&&x!=="delete"&&x!=="deleteRange")throw new Error("Invalid operation type: "+x);var T=(m||b||{length:1}).length;if(m&&b&&m.length!==b.length)throw new Error("Given keys array must have same length as given values array.");if(T===0)return E({numFailures:0,failures:{},results:[],lastResult:void 0});var I,O=[],U=[],R=0,X=function(ee){++R,He(ee)};if(x==="deleteRange"){if(y.type===4)return E({numFailures:R,failures:U,results:[],lastResult:void 0});y.type===3?O.push(I=S.clear()):O.push(I=S.delete(i(y)))}else{var q=K?C?[b,m]:[b,null]:[m,null],le=q[0],Z=q[1];if(K)for(var G=0;G<T;++G)O.push(I=Z&&Z[G]!==void 0?S[x](le[G],Z[G]):S[x](le[G])),I.onerror=X;else for(var G=0;G<T;++G)O.push(I=S[x](le[G])),I.onerror=X}var fe=function(ee){var Te=ee.target.result;O.forEach(function(J,Ze){return J.error!=null&&(U[Ze]=J.error)}),E({numFailures:R,failures:U,results:x==="delete"?m:O.map(function(J){return J.result}),lastResult:Te})};I.onerror=function(ee){X(ee),fe(ee)},I.onsuccess=fe})}function v(g){var w=g.trans,x=g.values,m=g.query,b=g.reverse,y=g.unique;return new Promise(function(E,A){E=j(E);var S=m.index,C=m.range,K=w.objectStore(p),T=S.isPrimaryKey?K:K.index(S.name),I=b?y?"prevunique":"prev":y?"nextunique":"next",O=x||!("openKeyCursor"in T)?T.openCursor(i(C),I):T.openKeyCursor(i(C),I);O.onerror=te(A),O.onsuccess=j(function(U){var R=O.result;if(!R){E(null);return}R.___id=++pi,R.done=!1;var X=R.continue.bind(R),q=R.continuePrimaryKey;q&&(q=q.bind(R));var le=R.advance.bind(R),Z=function(){throw new Error("Cursor not started")},G=function(){throw new Error("Cursor not stopped")};R.trans=w,R.stop=R.continue=R.continuePrimaryKey=R.advance=Z,R.fail=j(A),R.next=function(){var fe=this,ee=1;return this.start(function(){return ee--?fe.continue():fe.stop()}).then(function(){return fe})},R.start=function(fe){var ee=new Promise(function(J,Ze){J=j(J),O.onerror=te(Ze),R.fail=Ze,R.stop=function(vr){R.stop=R.continue=R.continuePrimaryKey=R.advance=G,J(vr)}}),Te=function(){if(O.result)try{fe()}catch(J){R.fail(J)}else R.done=!0,R.start=function(){throw new Error("Cursor behind last entry")},R.stop()};return O.onsuccess=j(function(J){O.onsuccess=Te,Te()}),R.continue=X,R.continuePrimaryKey=q,R.advance=le,Te(),ee},E(R)},A)})}function d(g){return function(w){return new Promise(function(x,m){x=j(x);var b=w.trans,y=w.values,E=w.limit,A=w.query,S=E===1/0?void 0:E,C=A.index,K=A.range,T=b.objectStore(p),I=C.isPrimaryKey?T:T.index(C.name),O=i(K);if(E===0)return x({result:[]});if(g){var U=y?I.getAll(O,S):I.getAllKeys(O,S);U.onsuccess=function(le){return x({result:le.target.result})},U.onerror=te(m)}else{var R=0,X=y||!("openKeyCursor"in I)?I.openCursor(O):I.openKeyCursor(O),q=[];X.onsuccess=function(le){var Z=X.result;if(!Z)return x({result:q});if(q.push(y?Z.value:Z.primaryKey),++R===E)return x({result:q});Z.continue()},X.onerror=te(m)}})}}return{name:p,schema:f,mutate:_,getMany:function(g){var w=g.trans,x=g.keys;return new Promise(function(m,b){m=j(m);for(var y=w.objectStore(p),E=x.length,A=new Array(E),S=0,C=0,K,T=function(R){var X=R.target;(A[X._pos]=X.result)!=null,++C===S&&m(A)},I=te(b),O=0;O<E;++O){var U=x[O];U!=null&&(K=y.get(x[O]),K._pos=O,K.onsuccess=T,K.onerror=I,++S)}S===0&&m(A)})},get:function(g){var w=g.trans,x=g.key;return new Promise(function(m,b){m=j(m);var y=w.objectStore(p),E=y.get(x);E.onsuccess=function(A){return m(A.target.result)},E.onerror=te(b)})},query:d(s),openCursor:v,count:function(g){var w=g.query,x=g.trans,m=w.index,b=w.range;return new Promise(function(y,E){var A=x.objectStore(p),S=m.isPrimaryKey?A:A.index(m.name),C=i(b),K=C?S.count(C):S.count();K.onsuccess=j(function(T){return y(T.target.result)}),K.onerror=te(E)})}}}var o=r(e,n),u=o.schema,s=o.hasGetAll,c=u.tables.map(function(f){return a(f)}),h={};return c.forEach(function(f){return h[f.name]=f}),{stack:"dbcore",transaction:e.transaction.bind(e),table:function(f){var p=h[f];if(!p)throw new Error("Table '"+f+"' not found");return h[f]},MIN_KEY:-1/0,MAX_KEY:ze(t),schema:u}}function yi(e,t){return t.reduce(function(n,r){var i=r.create;return P(P({},n),i(n))},e)}function gi(e,t,n,r){var i=n.IDBKeyRange;n.indexedDB;var a=yi(vi(t,i,r),e.dbcore);return{dbcore:a}}function hn(e,t){var n=e._novip,r=t.db,i=gi(n._middlewares,r,n._deps,t);n.core=i.dbcore,n.tables.forEach(function(a){var o=a.name;n.core.schema.tables.some(function(u){return u.name===o})&&(a.core=n.core.table(o),n[o]instanceof n.Table&&(n[o].core=a.core))})}function mt(e,t,n,r){var i=e._novip;n.forEach(function(a){var o=r[a];t.forEach(function(u){var s=nn(u,a);(!s||"value"in s&&s.value===void 0)&&(u===i.Transaction.prototype||u instanceof i.Transaction?se(u,a,{get:function(){return this.table(a)},set:function(c){jn(this,a,{value:c,writable:!0,configurable:!0,enumerable:!0})}}):u[a]=new i.Table(a,o))})})}function Gt(e,t){var n=e._novip;t.forEach(function(r){for(var i in r)r[i]instanceof n.Table&&delete r[i]})}function mi(e,t){return e._cfg.version-t._cfg.version}function bi(e,t,n,r){var i=e._dbSchema,a=e._createTransaction("readwrite",e._storeNames,i);a.create(n),a._completion.catch(r);var o=a._reject.bind(a),u=M.transless||M;ve(function(){M.trans=a,M.transless=u,t===0?(N(i).forEach(function(s){dn(n,s,i[s].primKey,i[s].indexes)}),hn(e,n),k.follow(function(){return e.on.populate.fire(a)}).catch(o)):_i(e,t,a,n).catch(o)})}function _i(e,t,n,r){var i=e._novip,a=[],o=i._versions,u=i._dbSchema=pn(i,i.idbdb,r),s=!1,c=o.filter(function(f){return f._cfg.version>=t});c.forEach(function(f){a.push(function(){var p=u,_=f._cfg.dbschema;Jt(i,p,r),Jt(i,_,r),u=i._dbSchema=_;var v=fr(p,_);v.add.forEach(function(b){dn(r,b[0],b[1].primKey,b[1].indexes)}),v.change.forEach(function(b){if(b.recreate)throw new D.Upgrade("Not yet support for changing primary key");var y=r.objectStore(b.name);b.add.forEach(function(E){return qt(y,E)}),b.change.forEach(function(E){y.deleteIndex(E.name),qt(y,E)}),b.del.forEach(function(E){return y.deleteIndex(E)})});var d=f._cfg.contentUpgrade;if(d&&f._cfg.version>t){hn(i,r),n._memoizedTables={},s=!0;var g=Vn(_);v.del.forEach(function(b){g[b]=p[b]}),Gt(i,[i.Transaction.prototype]),mt(i,[i.Transaction.prototype],N(g),g),n.schema=g;var w=rn(d);w&&Pe();var x,m=k.follow(function(){if(x=d(n),x&&w){var b=ce.bind(null,null);x.then(b,b)}});return x&&typeof x.then=="function"?k.resolve(x):m.then(function(){return x})}}),a.push(function(p){if(!s||!Gr){var _=f._cfg.dbschema;xi(_,p)}Gt(i,[i.Transaction.prototype]),mt(i,[i.Transaction.prototype],i._storeNames,i._dbSchema),n.schema=i._dbSchema})});function h(){return a.length?k.resolve(a.shift()(n.idbtrans)).then(h):k.resolve()}return h().then(function(){wi(u,r)})}function fr(e,t){var n={del:[],add:[],change:[]},r;for(r in e)t[r]||n.del.push(r);for(r in t){var i=e[r],a=t[r];if(!i)n.add.push([r,a]);else{var o={name:r,def:a,recreate:!1,del:[],add:[],change:[]};if(""+(i.primKey.keyPath||"")!=""+(a.primKey.keyPath||"")||i.primKey.auto!==a.primKey.auto&&!Et)o.recreate=!0,n.change.push(o);else{var u=i.idxByName,s=a.idxByName,c=void 0;for(c in u)s[c]||o.del.push(c);for(c in s){var h=u[c],f=s[c];h?h.src!==f.src&&o.change.push(f):o.add.push(f)}(o.del.length>0||o.add.length>0||o.change.length>0)&&n.change.push(o)}}}return n}function dn(e,t,n,r){var i=e.db.createObjectStore(t,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach(function(a){return qt(i,a)}),i}function wi(e,t){N(e).forEach(function(n){t.db.objectStoreNames.contains(n)||dn(t,n,e[n].primKey,e[n].indexes)})}function xi(e,t){[].slice.call(t.db.objectStoreNames).forEach(function(n){return e[n]==null&&t.db.deleteObjectStore(n)})}function qt(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function pn(e,t,n){var r={},i=wt(t.objectStoreNames,0);return i.forEach(function(a){for(var o=n.objectStore(a),u=o.keyPath,s=Qt(cr(u),u||"",!1,!1,!!o.autoIncrement,u&&typeof u!="string",!0),c=[],h=0;h<o.indexNames.length;++h){var f=o.index(o.indexNames[h]);u=f.keyPath;var p=Qt(f.name,u,!!f.unique,!!f.multiEntry,!1,u&&typeof u!="string",!1);c.push(p)}r[a]=lr(a,s,c)}),r}function Ei(e,t,n){var r=e._novip;r.verno=t.version/10;var i=r._dbSchema=pn(r,t,n);r._storeNames=wt(t.objectStoreNames,0),mt(r,[r._allTables],N(i),i)}function Si(e,t){var n=pn(e,e.idbdb,t),r=fr(n,e._dbSchema);return!(r.add.length||r.change.some(function(i){return i.add.length||i.change.length}))}function Jt(e,t,n){for(var r=e._novip,i=n.db.objectStoreNames,a=0;a<i.length;++a){var o=i[a],u=n.objectStore(o);r._hasGetAll="getAll"in u;for(var s=0;s<u.indexNames.length;++s){var c=u.indexNames[s],h=u.index(c).keyPath,f=typeof h=="string"?h:"["+wt(h).join("+")+"]";if(t[o]){var p=t[o].idxByName[f];p&&(p.name=c,delete t[o].idxByName[f],t[o].idxByName[c]=p)}}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&F.WorkerGlobalScope&&F instanceof F.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(r._hasGetAll=!1)}function ki(e){return e.split(",").map(function(t,n){t=t.trim();var r=t.replace(/([&*]|\+\+)/g,""),i=/^\[/.test(r)?r.match(/^\[(.*)\]$/)[1].split("+"):r;return Qt(r,i||null,/\&/.test(t),/\*/.test(t),/\+\+/.test(t),H(i),n===0)})}var Mi=function(){function e(){}return e.prototype._parseStoresSpec=function(t,n){N(t).forEach(function(r){if(t[r]!==null){var i=ki(t[r]),a=i.shift();if(a.multi)throw new D.Schema("Primary key cannot be multi-valued");i.forEach(function(o){if(o.auto)throw new D.Schema("Only primary key can be marked as autoIncrement (++)");if(!o.keyPath)throw new D.Schema("Index must have a name and cannot be an empty string")}),n[r]=lr(r,a,i)}})},e.prototype.stores=function(t){var n=this.db;this._cfg.storesSource=this._cfg.storesSource?z(this._cfg.storesSource,t):t;var r=n._versions,i={},a={};return r.forEach(function(o){z(i,o._cfg.storesSource),a=o._cfg.dbschema={},o._parseStoresSpec(i,a)}),n._dbSchema=a,Gt(n,[n._allTables,n,n.Transaction.prototype]),mt(n,[n._allTables,n,n.Transaction.prototype,this._cfg.tables],N(a),a),n._storeNames=N(a),this},e.prototype.upgrade=function(t){return this._cfg.contentUpgrade=un(this._cfg.contentUpgrade||B,t),this},e}();function Ai(e){return $e(Mi.prototype,function(n){this.db=e,this._cfg={version:n,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}function vn(e,t){var n=e._dbNamesDB;return n||(n=e._dbNamesDB=new bn(St,{addons:[],indexedDB:e,IDBKeyRange:t}),n.version(1).stores({dbnames:"name"})),n.table("dbnames")}function yn(e){return e&&typeof e.databases=="function"}function Ci(e){var t=e.indexedDB,n=e.IDBKeyRange;return yn(t)?Promise.resolve(t.databases()).then(function(r){return r.map(function(i){return i.name}).filter(function(i){return i!==St})}):vn(t,n).toCollection().primaryKeys()}function Di(e,t){var n=e.indexedDB,r=e.IDBKeyRange;!yn(n)&&t!==St&&vn(n,r).put({name:t}).catch(B)}function Ki(e,t){var n=e.indexedDB,r=e.IDBKeyRange;!yn(n)&&t!==St&&vn(n,r).delete(t).catch(B)}function $t(e){return ve(function(){return M.letThrough=!0,e()})}function Ri(){var e=!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent);if(!e||!indexedDB.databases)return Promise.resolve();var t;return new Promise(function(n){var r=function(){return indexedDB.databases().finally(n)};t=setInterval(r,100),r()}).finally(function(){return clearInterval(t)})}function Pi(e){var t=e._state,n=e._deps.indexedDB;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then(function(){return t.dbOpenError?L(t.dbOpenError):e});ne&&(t.openCanceller._stackHolder=Se()),t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;var r=t.openCanceller;function i(){if(t.openCanceller!==r)throw new D.DatabaseClosed("db.open() was cancelled")}var a=t.dbReadyResolve,o=null,u=!1;return k.race([r,(typeof navigator>"u"?k.resolve():Ri()).then(function(){return new k(function(s,c){if(i(),!n)throw new D.MissingAPI;var h=e.name,f=t.autoSchema?n.open(h):n.open(h,Math.round(e.verno*10));if(!f)throw new D.MissingAPI;f.onerror=te(c),f.onblocked=j(e._fireOnBlocked),f.onupgradeneeded=j(function(p){if(o=f.transaction,t.autoSchema&&!e._options.allowEmptyDB){f.onerror=He,o.abort(),f.result.close();var _=n.deleteDatabase(h);_.onsuccess=_.onerror=j(function(){c(new D.NoSuchDatabase("Database "+h+" doesnt exist"))})}else{o.onerror=te(c);var v=p.oldVersion>Math.pow(2,62)?0:p.oldVersion;u=v<1,e._novip.idbdb=f.result,bi(e,v/10,o,c)}},c),f.onsuccess=j(function(){o=null;var p=e._novip.idbdb=f.result,_=wt(p.objectStoreNames);if(_.length>0)try{var v=p.transaction(hi(_),"readonly");t.autoSchema?Ei(e,p,v):(Jt(e,e._dbSchema,v),Si(e,v)||console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),hn(e,v)}catch{}je.push(e),p.onversionchange=j(function(d){t.vcFired=!0,e.on("versionchange").fire(d)}),p.onclose=j(function(d){e.on("close").fire(d)}),u&&Di(e._deps,h),s()},c)})})]).then(function(){return i(),t.onReadyBeingFired=[],k.resolve($t(function(){return e.on.ready.fire(e.vip)})).then(function s(){if(t.onReadyBeingFired.length>0){var c=t.onReadyBeingFired.reduce(un,B);return t.onReadyBeingFired=[],k.resolve($t(function(){return c(e.vip)})).then(s)}})}).finally(function(){t.onReadyBeingFired=null,t.isBeingOpened=!1}).then(function(){return e}).catch(function(s){t.dbOpenError=s;try{o&&o.abort()}catch{}return r===t.openCanceller&&e._close(),L(s)}).finally(function(){t.openComplete=!0,a()})}function Zt(e){var t=function(o){return e.next(o)},n=function(o){return e.throw(o)},r=a(t),i=a(n);function a(o){return function(u){var s=o(u),c=s.value;return s.done?c:!c||typeof c.then!="function"?H(c)?Promise.all(c).then(r,i):r(c):c.then(r,i)}}return a(t)()}function Oi(e,t,n){var r=arguments.length;if(r<2)throw new D.InvalidArgument("Too few arguments");for(var i=new Array(r-1);--r;)i[r-1]=arguments[r];n=i.pop();var a=Hn(i);return[e,a,n]}function hr(e,t,n,r,i){return k.resolve().then(function(){var a=M.transless||M,o=e._createTransaction(t,n,e._dbSchema,r),u={trans:o,transless:a};if(r)o.idbtrans=r.idbtrans;else try{o.create(),e._state.PR1398_maxLoop=3}catch(f){return f.name===on.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e._close(),e.open().then(function(){return hr(e,t,n,null,i)})):L(f)}var s=rn(i);s&&Pe();var c,h=k.follow(function(){if(c=i.call(o,o),c)if(s){var f=ce.bind(null,null);c.then(f,f)}else typeof c.next=="function"&&typeof c.throw=="function"&&(c=Zt(c))},u);return(c&&typeof c.then=="function"?k.resolve(c).then(function(f){return o.active?f:L(new D.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):h.then(function(){return c})).then(function(f){return r&&o._resolve(),o._completion.then(function(){return f})}).catch(function(f){return o._reject(f),L(f)})})}function it(e,t,n){for(var r=H(e)?e.slice():[e],i=0;i<n;++i)r.push(t);return r}function Ti(e){return P(P({},e),{table:function(t){var n=e.table(t),r=n.schema,i={},a=[];function o(d,g,w){var x=Ne(d),m=i[x]=i[x]||[],b=d==null?0:typeof d=="string"?1:d.length,y=g>0,E=P(P({},w),{isVirtual:y,keyTail:g,keyLength:b,extractKey:Xt(d),unique:!y&&w.unique});if(m.push(E),E.isPrimaryKey||a.push(E),b>1){var A=b===2?d[0]:d.slice(0,b-1);o(A,g+1,w)}return m.sort(function(S,C){return S.keyTail-C.keyTail}),E}var u=o(r.primaryKey.keyPath,0,r.primaryKey);i[":id"]=[u];for(var s=0,c=r.indexes;s<c.length;s++){var h=c[s];o(h.keyPath,0,h)}function f(d){var g=i[Ne(d)];return g&&g[0]}function p(d,g){return{type:d.type===1?2:d.type,lower:it(d.lower,d.lowerOpen?e.MAX_KEY:e.MIN_KEY,g),lowerOpen:!0,upper:it(d.upper,d.upperOpen?e.MIN_KEY:e.MAX_KEY,g),upperOpen:!0}}function _(d){var g=d.query.index;return g.isVirtual?P(P({},d),{query:{index:g,range:p(d.query.range,g.keyTail)}}):d}var v=P(P({},n),{schema:P(P({},r),{primaryKey:u,indexes:a,getIndexByKeyPath:f}),count:function(d){return n.count(_(d))},query:function(d){return n.query(_(d))},openCursor:function(d){var g=d.query.index,w=g.keyTail,x=g.isVirtual,m=g.keyLength;if(!x)return n.openCursor(d);function b(y){function E(S){S!=null?y.continue(it(S,d.reverse?e.MAX_KEY:e.MIN_KEY,w)):d.unique?y.continue(y.key.slice(0,m).concat(d.reverse?e.MIN_KEY:e.MAX_KEY,w)):y.continue()}var A=Object.create(y,{continue:{value:E},continuePrimaryKey:{value:function(S,C){y.continuePrimaryKey(it(S,e.MAX_KEY,w),C)}},primaryKey:{get:function(){return y.primaryKey}},key:{get:function(){var S=y.key;return m===1?S[0]:S.slice(0,m)}},value:{get:function(){return y.value}}});return A}return n.openCursor(_(d)).then(function(y){return y&&b(y)})}});return v}})}var Ii={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:Ti};function gn(e,t,n,r){return n=n||{},r=r||"",N(e).forEach(function(i){if(!Q(t,i))n[r+i]=void 0;else{var a=e[i],o=t[i];if(typeof a=="object"&&typeof o=="object"&&a&&o){var u=Tt(a),s=Tt(o);u!==s?n[r+i]=t[i]:u==="Object"?gn(a,o,n,r+i+"."):a!==o&&(n[r+i]=t[i])}else a!==o&&(n[r+i]=t[i])}}),N(t).forEach(function(i){Q(e,i)||(n[r+i]=t[i])}),n}function Bi(e,t){return t.type==="delete"?t.keys:t.keys||t.values.map(e.extractKey)}var Fi={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(e){return P(P({},e),{table:function(t){var n=e.table(t),r=n.schema.primaryKey,i=P(P({},n),{mutate:function(a){var o=M.trans,u=o.table(t).hook,s=u.deleting,c=u.creating,h=u.updating;switch(a.type){case"add":if(c.fire===B)break;return o._promise("readwrite",function(){return f(a)},!0);case"put":if(c.fire===B&&h.fire===B)break;return o._promise("readwrite",function(){return f(a)},!0);case"delete":if(s.fire===B)break;return o._promise("readwrite",function(){return f(a)},!0);case"deleteRange":if(s.fire===B)break;return o._promise("readwrite",function(){return p(a)},!0)}return n.mutate(a);function f(v){var d=M.trans,g=v.keys||Bi(r,v);if(!g)throw new Error("Keys missing");return v=v.type==="add"||v.type==="put"?P(P({},v),{keys:g}):P({},v),v.type!=="delete"&&(v.values=Pt([],v.values,!0)),v.keys&&(v.keys=Pt([],v.keys,!0)),ji(n,v,g).then(function(w){var x=g.map(function(m,b){var y=w[b],E={onerror:null,onsuccess:null};if(v.type==="delete")s.fire.call(E,m,y,d);else if(v.type==="add"||y===void 0){var A=c.fire.call(E,m,v.values[b],d);m==null&&A!=null&&(m=A,v.keys[b]=m,r.outbound||$(v.values[b],r.keyPath,m))}else{var S=gn(y,v.values[b]),C=h.fire.call(E,S,m,y,d);if(C){var K=v.values[b];Object.keys(C).forEach(function(T){Q(K,T)?K[T]=C[T]:$(K,T,C[T])})}}return E});return n.mutate(v).then(function(m){for(var b=m.failures,y=m.results,E=m.numFailures,A=m.lastResult,S=0;S<g.length;++S){var C=y?y[S]:g[S],K=x[S];C==null?K.onerror&&K.onerror(b[S]):K.onsuccess&&K.onsuccess(v.type==="put"&&w[S]?v.values[S]:C)}return{failures:b,results:y,numFailures:E,lastResult:A}}).catch(function(m){return x.forEach(function(b){return b.onerror&&b.onerror(m)}),Promise.reject(m)})})}function p(v){return _(v.trans,v.range,1e4)}function _(v,d,g){return n.query({trans:v,values:!1,query:{index:r,range:d},limit:g}).then(function(w){var x=w.result;return f({type:"delete",keys:x,trans:v}).then(function(m){return m.numFailures>0?Promise.reject(m.failures[0]):x.length<g?{failures:[],numFailures:0,lastResult:void 0}:_(v,P(P({},d),{lower:x[x.length-1],lowerOpen:!0}),g)})})}}});return i}})}};function ji(e,t,n){return t.type==="add"?Promise.resolve([]):e.getMany({trans:t.trans,keys:n,cache:"immutable"})}function dr(e,t,n){try{if(!t||t.keys.length<e.length)return null;for(var r=[],i=0,a=0;i<t.keys.length&&a<e.length;++i)W(t.keys[i],e[a])===0&&(r.push(n?Qe(t.values[i]):t.values[i]),++a);return r.length===e.length?r:null}catch{return null}}var Ni={stack:"dbcore",level:-1,create:function(e){return{table:function(t){var n=e.table(t);return P(P({},n),{getMany:function(r){if(!r.cache)return n.getMany(r);var i=dr(r.keys,r.trans._cache,r.cache==="clone");return i?k.resolve(i):n.getMany(r).then(function(a){return r.trans._cache={keys:r.keys,values:r.cache==="clone"?Qe(a):a},a})},mutate:function(r){return r.type!=="add"&&(r.trans._cache=null),n.mutate(r)}})}}}},Rt;function mn(e){return!("from"in e)}var ie=function(e,t){if(this)z(this,arguments.length?{d:1,from:e,to:arguments.length>1?t:e}:{d:0});else{var n=new ie;return e&&"d"in e&&z(n,e),n}};De(ie.prototype,(Rt={add:function(e){return bt(this,e),this},addKey:function(e){return Ye(this,e,e),this},addKeys:function(e){var t=this;return e.forEach(function(n){return Ye(t,n,n)}),this}},Rt[It]=function(){return en(this)},Rt));function Ye(e,t,n){var r=W(t,n);if(!isNaN(r)){if(r>0)throw RangeError();if(mn(e))return z(e,{from:t,to:n,d:1});var i=e.l,a=e.r;if(W(n,e.from)<0)return i?Ye(i,t,n):e.l={from:t,to:n,d:1,l:null,r:null},Rn(e);if(W(t,e.to)>0)return a?Ye(a,t,n):e.r={from:t,to:n,d:1,l:null,r:null},Rn(e);W(t,e.from)<0&&(e.from=t,e.l=null,e.d=a?a.d+1:1),W(n,e.to)>0&&(e.to=n,e.r=null,e.d=e.l?e.l.d+1:1);var o=!e.r;i&&!e.l&&bt(e,i),a&&o&&bt(e,a)}}function bt(e,t){function n(r,i){var a=i.from,o=i.to,u=i.l,s=i.r;Ye(r,a,o),u&&n(r,u),s&&n(r,s)}mn(t)||n(e,t)}function Li(e,t){var n=en(t),r=n.next();if(r.done)return!1;for(var i=r.value,a=en(e),o=a.next(i.from),u=o.value;!r.done&&!o.done;){if(W(u.from,i.to)<=0&&W(u.to,i.from)>=0)return!0;W(i.from,u.from)<0?i=(r=n.next(u.from)).value:u=(o=a.next(i.from)).value}return!1}function en(e){var t=mn(e)?null:{s:0,n:e};return{next:function(n){for(var r=arguments.length>0;t;)switch(t.s){case 0:if(t.s=1,r)for(;t.n.l&&W(n,t.n.from)<0;)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!r||W(n,t.n.to)<=0)return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function Rn(e){var t,n,r=(((t=e.r)===null||t===void 0?void 0:t.d)||0)-(((n=e.l)===null||n===void 0?void 0:n.d)||0),i=r>1?"r":r<-1?"l":"";if(i){var a=i==="r"?"l":"r",o=P({},e),u=e[i];e.from=u.from,e.to=u.to,e[i]=u[i],o[i]=u[a],e[a]=o,o.d=Pn(o)}e.d=Pn(e)}function Pn(e){var t=e.r,n=e.l;return(t?n?Math.max(t.d,n.d):t.d:n?n.d:0)+1}var Ui={stack:"dbcore",level:0,create:function(e){var t=e.schema.name,n=new ie(e.MIN_KEY,e.MAX_KEY);return P(P({},e),{table:function(r){var i=e.table(r),a=i.schema,o=a.primaryKey,u=o.extractKey,s=o.outbound,c=P(P({},i),{mutate:function(p){var _=p.trans,v=_.mutatedParts||(_.mutatedParts={}),d=function(A){var S="idb://"+t+"/"+r+"/"+A;return v[S]||(v[S]=new ie)},g=d(""),w=d(":dels"),x=p.type,m=p.type==="deleteRange"?[p.range]:p.type==="delete"?[p.keys]:p.values.length<50?[[],p.values]:[],b=m[0],y=m[1],E=p.trans._cache;return i.mutate(p).then(function(A){if(H(b)){x!=="delete"&&(b=A.results),g.addKeys(b);var S=dr(b,E);!S&&x!=="add"&&w.addKeys(b),(S||y)&&Vi(d,a,S,y)}else if(b){var C={from:b.lower,to:b.upper};w.add(C),g.add(C)}else g.add(n),w.add(n),a.indexes.forEach(function(K){return d(K.name).add(n)});return A})}}),h=function(p){var _,v,d=p.query,g=d.index,w=d.range;return[g,new ie((_=w.lower)!==null&&_!==void 0?_:e.MIN_KEY,(v=w.upper)!==null&&v!==void 0?v:e.MAX_KEY)]},f={get:function(p){return[o,new ie(p.key)]},getMany:function(p){return[o,new ie().addKeys(p.keys)]},count:h,query:h,openCursor:h};return N(f).forEach(function(p){c[p]=function(_){var v=M.subscr;if(v){var d=function(E){var A="idb://"+t+"/"+r+"/"+E;return v[A]||(v[A]=new ie)},g=d(""),w=d(":dels"),x=f[p](_),m=x[0],b=x[1];if(d(m.name||"").add(b),!m.isPrimaryKey)if(p==="count")w.add(n);else{var y=p==="query"&&s&&_.values&&i.query(P(P({},_),{values:!1}));return i[p].apply(this,arguments).then(function(E){if(p==="query"){if(s&&_.values)return y.then(function(K){var T=K.result;return g.addKeys(T),E});var A=_.values?E.result.map(u):E.result;_.values?g.addKeys(A):w.addKeys(A)}else if(p==="openCursor"){var S=E,C=_.values;return S&&Object.create(S,{key:{get:function(){return w.addKey(S.primaryKey),S.key}},primaryKey:{get:function(){var K=S.primaryKey;return w.addKey(K),K}},value:{get:function(){return C&&g.addKey(S.primaryKey),S.value}}})}return E})}}return i[p].apply(this,arguments)}}),c}})}};function Vi(e,t,n,r){function i(a){var o=e(a.name||"");function u(c){return c!=null?a.extractKey(c):null}var s=function(c){return a.multiEntry&&H(c)?c.forEach(function(h){return o.addKey(h)}):o.addKey(c)};(n||r).forEach(function(c,h){var f=n&&u(n[h]),p=r&&u(r[h]);W(f,p)!==0&&(f!=null&&s(f),p!=null&&s(p))})}t.indexes.forEach(i)}var bn=function(){function e(t,n){var r=this;this._middlewares={},this.verno=0;var i=e.dependencies;this._options=n=P({addons:e.addons,autoOpen:!0,indexedDB:i.indexedDB,IDBKeyRange:i.IDBKeyRange},n),this._deps={indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange};var a=n.addons;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var o={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:B,dbReadyPromise:null,cancelOpen:B,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3};o.dbReadyPromise=new k(function(u){o.dbReadyResolve=u}),o.openCanceller=new k(function(u,s){o.cancelOpen=s}),this._state=o,this.name=t,this.on=Je(this,"populate","blocked","versionchange","close",{ready:[un,B]}),this.on.ready.subscribe=Nn(this.on.ready.subscribe,function(u){return function(s,c){e.vip(function(){var h=r._state;if(h.openComplete)h.dbOpenError||k.resolve().then(s),c&&u(s);else if(h.onReadyBeingFired)h.onReadyBeingFired.push(s),c&&u(s);else{u(s);var f=r;c||u(function p(){f.on.ready.unsubscribe(s),f.on.ready.unsubscribe(p)})}})}}),this.Collection=ri(this),this.Table=$r(this),this.Transaction=fi(this),this.Version=Ai(this),this.WhereClause=ci(this),this.on("versionchange",function(u){u.newVersion>0?console.warn("Another connection wants to upgrade database '"+r.name+"'. Closing db now to resume the upgrade."):console.warn("Another connection wants to delete database '"+r.name+"'. Closing db now to resume the delete request."),r.close()}),this.on("blocked",function(u){!u.newVersion||u.newVersion<u.oldVersion?console.warn("Dexie.delete('"+r.name+"') was blocked"):console.warn("Upgrade '"+r.name+"' blocked by other connection holding version "+u.oldVersion/10)}),this._maxKey=ze(n.IDBKeyRange),this._createTransaction=function(u,s,c,h){return new r.Transaction(u,s,c,r._options.chromeTransactionDurability,h)},this._fireOnBlocked=function(u){r.on("blocked").fire(u),je.filter(function(s){return s.name===r.name&&s!==r&&!s._state.vcFired}).map(function(s){return s.on("versionchange").fire(u)})},this.use(Ii),this.use(Fi),this.use(Ui),this.use(Ni),this.vip=Object.create(this,{_vip:{value:!0}}),a.forEach(function(u){return u(r)})}return e.prototype.version=function(t){if(isNaN(t)||t<.1)throw new D.Type("Given version is not a positive number");if(t=Math.round(t*10)/10,this.idbdb||this._state.isBeingOpened)throw new D.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,t);var n=this._versions,r=n.filter(function(i){return i._cfg.version===t})[0];return r||(r=new this.Version(t),n.push(r),n.sort(mi),r.stores({}),this._state.autoSchema=!1,r)},e.prototype._whenReady=function(t){var n=this;return this.idbdb&&(this._state.openComplete||M.letThrough||this._vip)?t():new k(function(r,i){if(n._state.openComplete)return i(new D.DatabaseClosed(n._state.dbOpenError));if(!n._state.isBeingOpened){if(!n._options.autoOpen){i(new D.DatabaseClosed);return}n.open().catch(B)}n._state.dbReadyPromise.then(r,i)}).then(t)},e.prototype.use=function(t){var n=t.stack,r=t.create,i=t.level,a=t.name;a&&this.unuse({stack:n,name:a});var o=this._middlewares[n]||(this._middlewares[n]=[]);return o.push({stack:n,create:r,level:i??10,name:a}),o.sort(function(u,s){return u.level-s.level}),this},e.prototype.unuse=function(t){var n=t.stack,r=t.name,i=t.create;return n&&this._middlewares[n]&&(this._middlewares[n]=this._middlewares[n].filter(function(a){return i?a.create!==i:r?a.name!==r:!1})),this},e.prototype.open=function(){return Pi(this)},e.prototype._close=function(){var t=this._state,n=je.indexOf(this);if(n>=0&&je.splice(n,1),this.idbdb){try{this.idbdb.close()}catch{}this._novip.idbdb=null}t.dbReadyPromise=new k(function(r){t.dbReadyResolve=r}),t.openCanceller=new k(function(r,i){t.cancelOpen=i})},e.prototype.close=function(){this._close();var t=this._state;this._options.autoOpen=!1,t.dbOpenError=new D.DatabaseClosed,t.isBeingOpened&&t.cancelOpen(t.dbOpenError)},e.prototype.delete=function(){var t=this,n=arguments.length>0,r=this._state;return new k(function(i,a){var o=function(){t.close();var u=t._deps.indexedDB.deleteDatabase(t.name);u.onsuccess=j(function(){Ki(t._deps,t.name),i()}),u.onerror=te(a),u.onblocked=t._fireOnBlocked};if(n)throw new D.InvalidArgument("Arguments not allowed in db.delete()");r.isBeingOpened?r.dbReadyPromise.then(o):o()})},e.prototype.backendDB=function(){return this.idbdb},e.prototype.isOpen=function(){return this.idbdb!==null},e.prototype.hasBeenClosed=function(){var t=this._state.dbOpenError;return t&&t.name==="DatabaseClosed"},e.prototype.hasFailed=function(){return this._state.dbOpenError!==null},e.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(e.prototype,"tables",{get:function(){var t=this;return N(this._allTables).map(function(n){return t._allTables[n]})},enumerable:!1,configurable:!0}),e.prototype.transaction=function(){var t=Oi.apply(this,arguments);return this._transaction.apply(this,t)},e.prototype._transaction=function(t,n,r){var i=this,a=M.trans;(!a||a.db!==this||t.indexOf("!")!==-1)&&(a=null);var o=t.indexOf("?")!==-1;t=t.replace("!","").replace("?","");var u,s;try{if(s=n.map(function(h){var f=h instanceof i.Table?h.name:h;if(typeof f!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return f}),t=="r"||t===Mt)u=Mt;else if(t=="rw"||t==At)u=At;else throw new D.InvalidArgument("Invalid transaction mode: "+t);if(a){if(a.mode===Mt&&u===At)if(o)a=null;else throw new D.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");a&&s.forEach(function(h){if(a&&a.storeNames.indexOf(h)===-1)if(o)a=null;else throw new D.SubTransaction("Table "+h+" not included in parent transaction.")}),o&&a&&!a.active&&(a=null)}}catch(h){return a?a._promise(null,function(f,p){p(h)}):L(h)}var c=hr.bind(null,this,u,s,a,r);return a?a._promise(u,c,"lock"):M.trans?Oe(M.transless,function(){return i._whenReady(c)}):this._whenReady(c)},e.prototype.table=function(t){if(!Q(this._allTables,t))throw new D.InvalidTable("Table "+t+" does not exist");return this._allTables[t]},e}(),Hi=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",Wi=function(){function e(t){this._subscribe=t}return e.prototype.subscribe=function(t,n,r){return this._subscribe(!t||typeof t=="function"?{next:t,error:n,complete:r}:t)},e.prototype[Hi]=function(){return this},e}();function pr(e,t){return N(t).forEach(function(n){var r=e[n]||(e[n]=new ie);bt(r,t[n])}),e}function zi(e){return new Wi(function(t){var n=rn(e);function r(_){n&&Pe();var v=function(){return ve(e,{subscr:_,trans:null})},d=M.trans?Oe(M.transless,v):v();return n&&d.then(ce,ce),d}var i=!1,a={},o={},u={get closed(){return i},unsubscribe:function(){i=!0,ge.storagemutated.unsubscribe(f)}};t.start&&t.start(u);var s=!1,c=!1;function h(){return N(o).some(function(_){return a[_]&&Li(a[_],o[_])})}var f=function(_){pr(a,_),h()&&p()},p=function(){if(!(s||i)){a={};var _={},v=r(_);c||(ge(We,f),c=!0),s=!0,Promise.resolve(v).then(function(d){s=!1,!i&&(h()?p():(a={},o=_,t.next&&t.next(d)))},function(d){s=!1,t.error&&t.error(d),u.unsubscribe()})}};return p(),u})}var tn;try{tn={indexedDB:F.indexedDB||F.mozIndexedDB||F.webkitIndexedDB||F.msIndexedDB,IDBKeyRange:F.IDBKeyRange||F.webkitIDBKeyRange}}catch{tn={indexedDB:null,IDBKeyRange:null}}var me=bn;De(me,P(P({},xt),{delete:function(e){var t=new me(e,{addons:[]});return t.delete()},exists:function(e){return new me(e,{addons:[]}).open().then(function(t){return t.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(e){try{return Ci(me.dependencies).then(e)}catch{return L(new D.MissingAPI)}},defineClass:function(){function e(t){z(this,t)}return e},ignoreTransaction:function(e){return M.trans?Oe(M.transless,e):e()},vip:$t,async:function(e){return function(){try{var t=Zt(e.apply(this,arguments));return!t||typeof t.then!="function"?k.resolve(t):t}catch(n){return L(n)}}},spawn:function(e,t,n){try{var r=Zt(e.apply(n,t||[]));return!r||typeof r.then!="function"?k.resolve(r):r}catch(i){return L(i)}},currentTransaction:{get:function(){return M.trans||null}},waitFor:function(e,t){var n=k.resolve(typeof e=="function"?me.ignoreTransaction(e):e).timeout(t||6e4);return M.trans?M.trans.waitFor(n):n},Promise:k,debug:{get:function(){return ne},set:function(e){zn(e,e==="dexie"?function(){return!0}:ar)}},derive:Ke,extend:z,props:De,override:Nn,Events:Je,on:ge,liveQuery:zi,extendObservabilitySet:pr,getByKeyPath:ue,setByKeyPath:$,delByKeyPath:Er,shallowClone:Vn,deepClone:Qe,getObjectDiff:gn,cmp:W,asap:Ln,minKey:Yt,addons:[],connections:je,errnames:on,dependencies:tn,semVer:kn,version:kn.split(".").map(function(e){return parseInt(e)}).reduce(function(e,t,n){return e+t/Math.pow(10,n*2)})}));me.maxKey=ze(me.dependencies.IDBKeyRange);typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(ge(We,function(e){if(!oe){var t;Et?(t=document.createEvent("CustomEvent"),t.initCustomEvent(pe,!0,!0,e)):t=new CustomEvent(pe,{detail:e}),oe=!0,dispatchEvent(t),oe=!1}}),addEventListener(pe,function(e){var t=e.detail;oe||_t(t)}));function _t(e){var t=oe;try{oe=!0,ge.storagemutated.fire(e)}finally{oe=t}}var oe=!1;if(typeof BroadcastChannel<"u"){var at=new BroadcastChannel(pe);typeof at.unref=="function"&&at.unref(),ge(We,function(e){oe||at.postMessage(e)}),at.onmessage=function(e){e.data&&_t(e.data)}}else if(typeof self<"u"&&typeof navigator<"u"){ge(We,function(e){try{oe||(typeof localStorage<"u"&&localStorage.setItem(pe,JSON.stringify({trig:Math.random(),changedParts:e})),typeof self.clients=="object"&&Pt([],self.clients.matchAll({includeUncontrolled:!0}),!0).forEach(function(t){return t.postMessage({type:pe,changedParts:e})}))}catch{}}),typeof addEventListener<"u"&&addEventListener("storage",function(e){if(e.key===pe){var t=JSON.parse(e.newValue);t&&_t(t.changedParts)}});var On=self.document&&navigator.serviceWorker;On&&On.addEventListener("message",Yi)}function Yi(e){var t=e.data;t&&t.type===pe&&_t(t.changedParts)}k.rejectionMapper=Pr;zn(ne,ar);class Qi extends bn{constructor(){super("myDatabase");_n(this,"roms");this.version(1).stores({roms:"crc32, title"})}}const Eu=new Qi;export{To as $,Zo as A,Ha as B,$o as C,Jo as D,la as E,La as F,qo as G,Go as H,za as I,Xo as J,Qo as K,Ua as L,xu as M,Yo as N,zo as O,Wo as P,Ho as Q,Va as R,Vo as S,Uo as T,Lo as U,Na as V,No as W,jo as X,Fo as Y,Bo as Z,Io as _,wu as a,Qa as a$,Oo as a0,Po as a1,Ba as a2,Ro as a3,Ko as a4,Do as a5,Co as a6,Ao as a7,Mo as a8,ko as a9,to as aA,eo as aB,Pa as aC,Za as aD,$a as aE,Ja as aF,qa as aG,Ga as aH,Ra as aI,wa as aJ,_a as aK,$i as aL,ca as aM,sa as aN,ua as aO,oa as aP,aa as aQ,ia as aR,ra as aS,na as aT,ta as aU,ea as aV,Zi as aW,Ji as aX,Ya as aY,Eu as aZ,Fn as a_,So as aa,Eo as ab,xo as ac,wo as ad,_o as ae,bo as af,mo as ag,go as ah,yo as ai,vo as aj,po as ak,ho as al,Ia as am,fo as an,lo as ao,Fa as ap,co as aq,so as ar,Ta as as,uo as at,oo as au,ao as av,io as aw,ro as ax,no as ay,Oa as az,_u as b,Xa as b0,ha as b1,Tn as b2,Ma as b3,ba as b4,ma as b5,Ca as b6,zi as b7,Aa as b8,ga as b9,pa as ba,da as bb,mr as bc,In as bd,ka as be,Sa as bf,Ea as bg,xa as bh,ya as bi,Da as bj,fa as bk,Bn as bl,Ka as bm,bu as c,ja as d,mu as e,gu as f,yu as g,vu as h,pu as i,du as j,hu as k,fu as l,lu as m,cu as n,su as o,qi as p,uu as q,ou as r,au as s,iu as t,ru as u,nu as v,va as w,tu as x,Wa as y,eu as z};
